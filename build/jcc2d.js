!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).JC=t.JC||{})}(this,function(t){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function l(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,i,s,n=a(r);return e=o?(t=a(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),i=this,!(s=e)||"object"!=typeof s&&"function"!=typeof s?d(i):s}}function e(t){return Object.prototype.toString.call(t)}!function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n)),s=window.setTimeout(function(){t(e+i)},i);return n=e+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.RAF=window.requestAnimationFrame,window.CAF=window.cancelAnimationFrame}();var r,o,h,p,c,f,w={copyJSON:function(t){return JSON.parse(JSON.stringify(t))},isArray:(f=e([]),function(t){return e(t)===f}),isString:(c=e("s"),function(t){return e(t)===c}),isNumber:(p=e(1),function(t){return e(t)===p}),isFunction:(h=e(function(){}),function(t){return e(t)===h}),isUndefined:function(t){return void 0===t},isBoolean:(o=e(!0),function(t){return e(t)===o}),isObject:(r=e({}),function(t){return e(t)===r}),euclideanModulo:function(t,e){return(t%e+e)%e},codomainBounce:function(t,e,i){return t<e?2*e-t:i<t?2*i-t:t},clamp:function(t,e,i){return t<e?e:i<t?i:t},inRange:function(t,e,i){return e<=t&&t<=i},getAssets:function(t,e){for(var i=0;i<e.length;i++)if(t===e[i].id)return e[i];return console.error("have not assets name as",t),{}},rgb2hex:function(t){return(t[0]<<16)+(t[1]<<8)+(0|t[2])}},m=function(){function t(){x(this,t),this.listeners={}}return l(t,[{key:"on",value:function(t,e){return w.isFunction(e)&&(w.isUndefined(this.listeners[t])&&(this.listeners[t]=[]),this.listeners[t].push(e)),this}},{key:"off",value:function(t,e){if(w.isUndefined(this.listeners[t]))return this;var i=this.listeners[t],s=i.length;if(0<s)if(e)for(;s--;)i[s]===e&&i.splice(s,1);else i.length=0;return this}},{key:"once",value:function(i,s){var n=this;if(!w.isFunction(s))return this;return this.on(i,function t(e){s(e),n.off(i,t)}),this}},{key:"emit",value:function(t){if(w.isUndefined(this.listeners[t]))return this;for(var e=(this.listeners[t]||[]).slice(0),i=arguments.length,s=new Array(1<i?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];for(var r=0;r<e.length;r++)e[r].apply(this,s);return this}}]),t}(),P=function(){function t(){x(this,t),this.layers={}}return l(t,[{key:"setLayer",value:function(t,e){t&&(this.layers[t]&&console.warn("动画层命名冲突",t),this.layers[t]=e)}},{key:"getLayer",value:function(t){return this.layers[t]}}]),t}(),y=null;var M={registerLoader:function(t){y=t},getLoader:function(){return y||console.warn("must register an image loader, before you parse an animation"),y}};function g(t,e,i){for(var s,n,r,o,a=t.length,h=0;h<a;h+=1)if("ks"in(s=t[h])&&!s.completed){if(s.completed=!0,s.tt&&(t[h-1].td=s.tt),s.hasMask)for(var p=s.masksProperties,l=p.length,u=0;u<l;u+=1)if(p[u].pt.k.i)k(p[u].pt.k);else for(r=p[u].pt.k.length,n=0;n<r;n+=1)p[u].pt.k[n].s&&k(p[u].pt.k[n].s[0]),p[u].pt.k[n].e&&k(p[u].pt.k[n].e[0]);0===s.ty?(s.layers=function(t,e){var i=0,s=e.length;for(;i<s;){if(e[i].id===t)return e[i].layers.__used?JSON.parse(JSON.stringify(e[i].layers)):(e[i].layers.__used=!0,e[i].layers);i+=1}}(s.refId,e),g(s.layers,e)):4===s.ty?function t(e){var i;var s=e.length;var n;var r;for(i=s-1;0<=i;--i)if("sh"==e[i].ty)if(e[i].ks.k.i)k(e[i].ks.k);else for(r=e[i].ks.k.length,n=0;n<r;n+=1)e[i].ks.k[n].s&&k(e[i].ks.k[n].s[0]),e[i].ks.k[n].e&&k(e[i].ks.k[n].e[0]);else"gr"==e[i].ty&&t(e[i].it)}(s.shapes):5==s.ty&&(0!==(o=s).t.a.length||"m"in o.t.p||(o.singleShape=!0))}}function k(t){for(var e=t.i.length,i=0;i<e;i+=1)t.i[i][0]+=t.v[i][0],t.i[i][1]+=t.v[i][1],t.o[i][0]+=t.v[i][0],t.o[i][1]+=t.v[i][1]}function _(t,e){var i=e?e.split("."):[100,100,100];if(t[0]>i[0])return 1;if(!(i[0]>t[0])){if(t[1]>i[1])return 1;if(!(i[1]>t[1]))return t[2]>i[2]||(i[2],void t[2])}}var T,b=(T=[4,4,14],function(t){if(_(T,t.v)&&(S(t.layers),t.assets))for(var e=t.assets.length,i=0;i<e;i+=1)t.assets[i].layers&&S(t.assets[i].layers)});function S(t){for(var e,i,s=t.length,n=0;n<s;n+=1)5===t[n].ty&&(e=t[n],i=void 0,i=e.t.d,e.t.d={k:[{s:i,t:0}]})}var D,E,O=(D=[4,7,99],function(t){if(t.chars&&!_(D,t.v))for(var e,i,s,n,r=t.chars.length,o=0;o<r;o+=1)if(t.chars[o].data&&t.chars[o].data.shapes)for(i=(n=t.chars[o].data.shapes[0].it).length,e=0;e<i;e+=1)(s=n[e].ks.k).__converted||(k(n[e].ks.k),s.__converted=!0)}),C=(E=[4,1,9],function(t){if(_(E,t.v)&&(A(t.layers),t.assets))for(var e=t.assets.length,i=0;i<e;i+=1)t.assets[i].layers&&A(t.assets[i].layers)});function A(t){for(var e=t.length,i=0;i<e;i+=1)4===t[i].ty&&!function t(e){for(var i,s,n=e.length,r=0;r<n;r+=1)if("gr"===e[r].ty)t(e[r].it);else if("fl"===e[r].ty||"st"===e[r].ty)if(e[r].c.k&&e[r].c.k[0].i)for(s=e[r].c.k.length,i=0;i<s;i+=1)e[r].c.k[i].s&&(e[r].c.k[i].s[0]/=255,e[r].c.k[i].s[1]/=255,e[r].c.k[i].s[2]/=255,e[r].c.k[i].s[3]/=255),e[r].c.k[i].e&&(e[r].c.k[i].e[0]/=255,e[r].c.k[i].e[1]/=255,e[r].c.k[i].e[2]/=255,e[r].c.k[i].e[3]/=255);else e[r].c.k[0]/=255,e[r].c.k[1]/=255,e[r].c.k[2]/=255,e[r].c.k[3]/=255}(t[i].shapes)}var I,L=(I=[4,4,18],function(t){if(_(I,t.v)&&(F(t.layers),t.assets))for(var e=t.assets.length,i=0;i<e;i+=1)t.assets[i].layers&&F(t.assets[i].layers)});function F(t){for(var e,i,s,n=t.length,r=0;r<n;r+=1){if((e=t[r]).hasMask)for(var o=e.masksProperties,a=o.length,h=0;h<a;h+=1)if(o[h].pt.k.i)o[h].pt.k.c=o[h].cl;else for(s=o[h].pt.k.length,i=0;i<s;i+=1)o[h].pt.k[i].s&&(o[h].pt.k[i].s[0].c=o[h].cl),o[h].pt.k[i].e&&(o[h].pt.k[i].e[0].c=o[h].cl);4===e.ty&&!function t(e){for(var i,s,n=e.length-1;0<=n;--n)if("sh"==e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(s=e[n].ks.k.length,i=0;i<s;i+=1)e[n].ks.k[i].s&&(e[n].ks.k[i].s[0].c=e[n].closed),e[n].ks.k[i].e&&(e[n].ks.k[i].e[0].c=e[n].closed);else"gr"==e[n].ty&&t(e[n].it)}(e.shapes)}}var X={completeData:function(t,e){t.__complete||(C(t),b(t),O(t),L(t),g(t.layers,t.assets),t.__complete=!0)},checkColors:C,checkChars:O,checkShapes:L,completeLayers:g},Y=11,V=1/(Y-1),B="function"==typeof Float32Array;function N(t,e){return 1-3*e+3*t}function z(t,e){return 3*e-6*t}function q(t,e,i){return((N(e,i)*t+z(e,i))*t+3*e)*t}function R(t,e,i){return 3*N(e,i)*t*t+2*z(e,i)*t+3*e}function j(t,e,i,s){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");this.mX1=t,this.mY1=e,this.mX2=i,this.mY2=s,this.sampleValues=new(B?Float32Array:Array)(Y),this._preCompute(),this.get=this.get.bind(this)}j.prototype._preCompute=function(){if(this.mX1!==this.mY1||this.mX2!==this.mY2)for(var t=0;t<Y;++t)this.sampleValues[t]=q(t*V,this.mX1,this.mX2)},j.prototype._getTForX=function(t){for(var e=0,i=1,s=Y-1;i!==s&&this.sampleValues[i]<=t;++i)e+=V;--i;var n=e+(t-this.sampleValues[i])/(this.sampleValues[i+1]-this.sampleValues[i])*V,r=R(n,this.mX1,this.mX2);return.001<=r?function(t,e,i,s){for(var n=0;n<4;++n){var r=R(e,i,s);if(0===r)return e;e-=(q(e,i,s)-t)/r}return e}(t,n,this.mX1,this.mX2):0===r?n:function(t,e,i,s,n){for(var r,o,a=0;0<(r=q(o=e+(i-e)/2,s,n)-t)?i=o:e=o,1e-7<Math.abs(r)&&++a<10;);return o}(t,e,e+V,this.mX1,this.mX2)},j.prototype.get=function(t){return this.mX1===this.mY1&&this.mX2===this.mY2?t:0===t?0:1===t?1:q(this._getTForX(t),this.mY1,this.mY2)};var U={};var it,st={getBezierEasing:function(t,e,i,s,n){var r=n||("bez_"+t+"_"+e+"_"+i+"_"+s).replace(/\./g,"p");if(U[r])return U[r];var o=new j(t,e,i,s);return U[r]=o}};function H(t){return new Array(t)}it="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){var i,s=0,n=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(s=0;s<e;s+=1)n.push(i);return n};function G(t,e,i){var s=0,n=t,r=H(n);return{newElement:function(){var t;t=s?r[--s]:e();return t},release:function(t){s===n&&(r=W.double(r),n*=2);i&&i(t);r[s]=t,s+=1}}}var W={double:function(t){return t.concat(H(t.length))}};var K=G(8,function(){return it("float32",2)}),J=function(){function h(){x(this,h),this.c=!1,this._length=0,this._maxLength=8,this.v=H(this._maxLength),this.o=H(this._maxLength),this.i=H(this._maxLength)}return l(h,[{key:"setPathData",value:function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=K.newElement(),this.o[i]=K.newElement(),this.i[i]=K.newElement(),i+=1}},{key:"setLength",value:function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t}},{key:"doubleArrayLength",value:function(){this.v=this.v.concat(H(this._maxLength)),this.i=this.i.concat(H(this._maxLength)),this.o=this.o.concat(H(this._maxLength)),this._maxLength*=2}},{key:"setXYAt",value:function(t,e,i,s,n){var r;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o}r[s]&&(!r[s]||n)||(r[s]=K.newElement()),r[s][0]=t,r[s][1]=e}},{key:"setTripleAt",value:function(t,e,i,s,n,r,o,a){this.setXYAt(t,e,"v",o,a),this.setXYAt(i,s,"o",o,a),this.setXYAt(n,r,"i",o,a)}},{key:"reverse",value:function(){var t=new h;t.setPathData(this.c,this._length);var e=this.v,i=this.o,s=this.i,n=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],i[0][0],i[0][1],0,!1),n=1);for(var r=this._length-1,o=this._length,a=n;a<o;a+=1)t.setTripleAt(e[r][0],e[r][1],s[r][0],s[r][1],i[r][0],i[r][1],a,!1),--r;return t}}]),h}();var Z=G(4,function(){return new J},function(t){for(var e=t._length,i=0;i<e;i+=1)K.release(t.v[i]),K.release(t.i[i]),K.release(t.o[i]),t.v[i]=null,t.i[i]=null,t.o[i]=null;t._length=0,t.c=!1});Z.clone=function(t){var e=Z.newElement(),i=void 0===t._length?t.v.length:t._length;e.setLength(i),e.c=t.c;for(var s=0;s<i;s+=1)e.setTripleAt(t.v[s][0],t.v[s][1],t.o[s][0],t.o[s][1],t.i[s][0],t.i[s][1],s);return e};var $=function(){function t(){x(this,t),this._length=0,this._maxLength=4,this.shapes=H(this._maxLength)}return l(t,[{key:"addShape",value:function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(H(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1}},{key:"releaseShapes",value:function(){for(var t=0;t<this._length;t+=1)Z.release(this.shapes[t]);this._length=0}}]),t}(),Q=0,tt=4,et=H(tt);var nt={newShapeCollection:function(){var t=Q?et[--Q]:new $;return t},release:function(t){for(var e=t._length,i=0;i<e;i+=1)Z.release(t.shapes[i]);t._length=0,Q===tt&&(et=W.double(et),tt*=2),et[Q]=t,Q+=1}},rt=function(){function t(){x(this,t)}return l(t,[{key:"outTypeExpressionMode",value:function(){this._hasOutTypeExpression=!0,this.container&&this.container.outTypeExpressionMode()}},{key:"addDynamicProperty",value:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0,t._hasOutTypeExpression&&this.outTypeExpressionMode())}},{key:"iterateDynamicProperties",value:function(t){this._mdf=!1;for(var e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue(t),this.dynamicProperties[i]._mdf&&(this._mdf=!0)}},{key:"initDynamicPropertyContainer",value:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1,this._hasOutTypeExpression=!1}}]),t}();var ot=G(8,function(){return{addedLength:0,percents:it("float32",200),lengths:it("float32",200)}});var at=G(8,function(){return{lengths:[],totalLength:0}},function(t){for(var e=t.lengths.length,i=0;i<e;i+=1)ot.release(t.lengths[i]);t.lengths.length=0}),ht=200;function pt(t,e,i,s,n,r){var o=t*s+e*n+i*r-n*s-r*t-i*e;return-.001<o&&o<.001}function lt(t,e,i,s){for(var n=ht,r=0,o=[],a=[],h=ot.newElement(),p=i.length,l=0;l<n;l+=1){for(var u=l/(n-1),c=0,f=0;f<p;f+=1){var d=Math.pow(1-u,3)*t[f]+3*Math.pow(1-u,2)*u*i[f]+3*(1-u)*Math.pow(u,2)*s[f]+Math.pow(u,3)*e[f];o[f]=d,null!==a[f]&&(c+=Math.pow(o[f]-a[f],2)),a[f]=o[f]}c&&(r+=c=Math.sqrt(c)),h.percents[l]=u,h.lengths[l]=r}return h.addedLength=r,h}function ut(t){this.segmentLength=0,this.points=new Array(t)}function ct(t,e){this.partialLength=t,this.point=e}var ft={};function dt(t,e){var i=e.percents,s=e.lengths,n=i.length,r=Math.floor((n-1)*t),o=t*e.addedLength,a=0;if(r===n-1||0===r||o===s[r])return i[r];for(var h=s[r]>o?-1:1,p=!0;p;)if(s[r]<=o&&s[r+1]>o?(a=(o-s[r])/(s[r+1]-s[r]),p=!1):r+=h,r<0||n-1<=r){if(r===n-1)return i[r];p=!1}return i[r]+(i[r+1]-i[r])*a}var vt=it("float32",8);var mt={getSegmentsLength:function(t){for(var e=at.newElement(),i=t.c,s=t.v,n=t.o,r=t.i,o=t._length,a=e.lengths,h=0,p=0;p<o-1;p+=1)a[p]=lt(s[p],s[p+1],n[p],r[p+1]),h+=a[p].addedLength;return i&&o&&(a[p]=lt(s[p],s[0],n[p],r[0]),h+=a[p].addedLength),e.totalLength=h,e},getNewSegment:function(t,e,i,s,n,r,o){for(var a=dt(n=n<0?0:1<n?1:n,o),h=dt(r=1<r?1:r,o),p=t.length,l=1-a,u=1-h,c=l*l*l,f=a*l*l*3,d=a*a*l*3,v=a*a*a,m=l*l*u,y=a*l*u+l*a*u+l*l*h,g=a*a*u+l*a*h+a*l*h,k=a*a*h,_=l*u*u,x=a*u*u+l*h*u+l*u*h,w=a*h*u+l*h*h+a*u*h,P=a*h*h,M=u*u*u,T=h*u*u+u*h*u+u*u*h,b=h*h*u+u*h*h+h*u*h,S=h*h*h,D=0;D<p;D+=1)vt[4*D]=Math.round(1e3*(c*t[D]+f*i[D]+d*s[D]+v*e[D]))/1e3,vt[4*D+1]=Math.round(1e3*(m*t[D]+y*i[D]+g*s[D]+k*e[D]))/1e3,vt[4*D+2]=Math.round(1e3*(_*t[D]+x*i[D]+w*s[D]+P*e[D]))/1e3,vt[4*D+3]=Math.round(1e3*(M*t[D]+T*i[D]+b*s[D]+S*e[D]))/1e3;return vt},getPointInSegment:function(t,e,i,s,n,r){var o=dt(n,r),a=1-o;return[Math.round(1e3*(a*a*a*t[0]+(o*a*a+a*o*a+a*a*o)*i[0]+(o*o*a+a*o*o+o*a*o)*s[0]+o*o*o*e[0]))/1e3,Math.round(1e3*(a*a*a*t[1]+(o*a*a+a*o*a+a*a*o)*i[1]+(o*o*a+a*o*o+o*a*o)*s[1]+o*o*o*e[1]))/1e3]},buildBezierData:function(t,e,i,s){var n=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+i[0]+"_"+i[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!ft[n]){var r,o=ht,a=0,h=null;2===t.length&&(t[0]!=e[0]||t[1]!=e[1])&&pt(t[0],t[1],e[0],e[1],t[0]+i[0],t[1]+i[1])&&pt(t[0],t[1],e[0],e[1],e[0]+s[0],e[1]+s[1])&&(o=2);for(var p=new ut(o),l=i.length,u=0;u<o;u+=1){r=H(l);for(var c=u/(o-1),f=0,d=0;d<l;d+=1){var v=Math.pow(1-c,3)*t[d]+3*Math.pow(1-c,2)*c*(t[d]+i[d])+3*(1-c)*Math.pow(c,2)*(e[d]+s[d])+Math.pow(c,3)*e[d];r[d]=v,null!==h&&(f+=Math.pow(r[d]-h[d],2))}a+=f=Math.sqrt(f),p.points[u]=new ct(f,r),h=r}p.segmentLength=a,ft[n]=p}return ft[n]},pointOnLine2D:pt,pointOnLine3D:function(t,e,i,s,n,r,o,a,h){if(0===i&&0===r&&0===h)return pt(t,e,s,n,o,a);var p=Math.sqrt(Math.pow(s-t,2)+Math.pow(n-e,2)+Math.pow(r-i,2)),l=Math.sqrt(Math.pow(o-t,2)+Math.pow(a-e,2)+Math.pow(h-i,2)),u=Math.sqrt(Math.pow(o-s,2)+Math.pow(a-n,2)+Math.pow(h-r,2)),c=l<p?u<p?p-l-u:u-l-p:l<u?u-l-p:l-p-u;return-1e-4<c&&c<1e-4}},yt=-999999,gt=Math.PI/180,kt=[0,0],_t=/(loopIn|loopOut)\(([^)]+)/,xt=/["']\w+["']/,wt=function(){function s(t,e,i){x(this,s),this.begin=e,this.end=i,this.total=this.end-this.begin,this.type=t}return l(s,[{key:"update",value:function(t){return"in"===this.type?t>=this.begin?t:this.end-w.euclideanModulo(this.begin-t,this.total):"out"===this.type?t<=this.end?t:this.begin+w.euclideanModulo(t-this.end,this.total):void 0}}]),s}(),Pt=function(){function s(t,e,i){x(this,s),this.begin=e,this.end=i,this.total=this.end-this.begin,this.type=t}return l(s,[{key:"update",value:function(t){if("in"===this.type&&t<this.begin||"out"===this.type&&t>this.end){var e=t-this.end;return this.pingpong(e)}return t}},{key:"pingpong",value:function(t){return Math.floor(t/this.total)%2?this.begin+w.euclideanModulo(t,this.total):this.end-w.euclideanModulo(t,this.total)}}]),s}(),Mt={loopIn:function(t,e,i){var s=t[0].t,n=t.length-1,r=t[Math.min(n,i)].t;switch(e){case"cycle":return new wt("in",s,r);case"pingpong":return new Pt("in",s,r)}return null},loopOut:function(t,e,i){var s=t.length-1,n=t[Math.max(0,s-i)].t,r=t[s].t;switch(e){case"cycle":return new wt("out",n,r);case"pingpong":return new Pt("out",n,r)}return null}};function Tt(t){var e=t.match(_t),i=e[2].split(/\s*,\s*/).map(function(t){return xt.test(t)?t.replace(/"|'/g,""):parseInt(t)});return{name:e[1],mode:i[0],offset:i[1]}}var bt={hasSupportExpression:function(t){return t.x&&_t.test(t.x)},getExpression:function(t){var e=Tt(t.x),i=e.name,s=e.mode,n=e.offset,r=void 0===n?0:n,o=0===r?t.k.length-1:r;return Mt[i]&&Mt[i](t.k,s,o)}};function St(t){var e=t[0]*gt,i=t[1]*gt,s=t[2]*gt,n=Math.cos(e/2),r=Math.cos(i/2),o=Math.cos(s/2),a=Math.sin(e/2),h=Math.sin(i/2),p=Math.sin(s/2);return[a*h*o+n*r*p,a*r*o+n*h*p,n*h*o-a*r*p,n*r*o-a*h*p]}var Dt=function(){function t(){x(this,t)}return l(t,[{key:"interpolateValue",value:function(t,e){var i;"multidimensional"===this.propType&&(i=it("float32",this.pv.length));for(var s,n,r,o,a=e.lastIndex,h=a,p=this.keyframes.length-1,l=!0;l;){if(s=this.keyframes[h],n=this.keyframes[h+1],h===p-1&&t>=n.t){s.h&&(s=n),a=0;break}if(n.t>t){a=h;break}h<p-1?h+=1:(a=0,l=!1)}var u,c,f,d,v,m,y,g,k,_,x,w,P,M,T,b,S,D,E,O,C,A,I,L,F,X,Y=n.t,V=s.t;if(s.to){s.bezierData||(s.bezierData=mt.buildBezierData(s.s,n.s||s.e,s.to,s.ti));var B=s.bezierData;if(Y<=t||t<V)for(var N=Y<=t?B.points.length-1:0,z=B.points[N].point.length,q=0;q<z;q+=1)i[q]=B.points[N].point[q];else{s.__fnct?o=s.__fnct:(o=st.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y,s.n).get,s.__fnct=o),r=o((t-V)/(Y-V));for(var R,j=B.segmentLength*r,U=e.lastFrame<t&&e._lastKeyframeIndex===h?e._lastAddedLength:0,H=e.lastFrame<t&&e._lastKeyframeIndex===h?e._lastPoint:0,l=!0,G=B.points.length;l;){if(U+=B.points[H].partialLength,0==j||0===r||H===B.points.length-1){for(z=B.points[H].point.length,q=0;q<z;q+=1)i[q]=B.points[H].point[q];break}if(U<=j&&j<U+B.points[H+1].partialLength){for(R=(j-U)/B.points[H+1].partialLength,z=B.points[H].point.length,q=0;q<z;q+=1)i[q]=B.points[H].point[q]+(B.points[H+1].point[q]-B.points[H].point[q])*R;break}H<G-1?H+=1:l=!1}e._lastPoint=H,e._lastAddedLength=U-B.points[H].partialLength,e._lastKeyframeIndex=h}}else{var W,K,J,Z,$,Q,tt,p=s.s.length,et=n.s||s.e;if(this.sh&&1!==s.h)Y<=t?(i[0]=et[0],i[1]=et[1],i[2]=et[2]):t<=V?(i[0]=s.s[0],i[1]=s.s[1],i[2]=s.s[2]):(Q=St(s.s),tt=St(et),u=i,x=tt,w=(t-V)/(Y-V),S=[],D=(_=Q)[0],E=_[1],O=_[2],C=_[3],A=x[0],I=x[1],L=x[2],F=x[3],(X=D*A+E*I+O*L+C*F)<0&&(X=-X,A=-A,I=-I,L=-L,F=-F),b=1e-6<1-X?(P=Math.acos(X),M=Math.sin(P),T=Math.sin((1-w)*P)/M,Math.sin(w*P)/M):(T=1-w,w),S[0]=T*D+b*A,S[1]=T*E+b*I,S[2]=T*O+b*L,S[3]=T*C+b*F,f=(c=S)[0],d=c[1],v=c[2],m=c[3],y=Math.atan2(2*d*m-2*f*v,1-2*d*d-2*v*v),g=Math.asin(2*f*d+2*v*m),k=Math.atan2(2*f*m-2*d*v,1-2*f*f-2*v*v),u[0]=y/gt,u[1]=g/gt,u[2]=k/gt);else for(h=0;h<p;h+=1)1!==s.h&&(r=Y<=t?1:t<V?0:(s.o.x.constructor===Array?(s.__fnct||(s.__fnct=[]),s.__fnct[h]?o=s.__fnct[h]:(W=void 0===s.o.x[h]?s.o.x[0]:s.o.x[h],K=void 0===s.o.y[h]?s.o.y[0]:s.o.y[h],J=void 0===s.i.x[h]?s.i.x[0]:s.i.x[h],Z=void 0===s.i.y[h]?s.i.y[0]:s.i.y[h],o=st.getBezierEasing(W,K,J,Z).get,s.__fnct[h]=o)):s.__fnct?o=s.__fnct:(W=s.o.x,K=s.o.y,J=s.i.x,Z=s.i.y,o=st.getBezierEasing(W,K,J,Z).get,s.__fnct=o),o((t-V)/(Y-V)))),et=n.s||s.e,$=1===s.h?s.s[h]:s.s[h]+(et[h]-s.s[h])*r,"multidimensional"===this.propType?i[h]=$:i=$}return e.lastIndex=a,i}},{key:"getValueAtCurrentTime",value:function(t){var e,i=this.keyframes[0].t,s=this.keyframes[this.keyframes.length-1].t;return t===this._caching.lastFrame||this._caching.lastFrame!==yt&&(this._caching.lastFrame>=s&&s<=t||this._caching.lastFrame<i&&t<i)||(this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),e=this.interpolateValue(t,this._caching),this.pv=e),this._caching.lastFrame=t,this.pv}},{key:"setVValue",value:function(t){var e;if("unidimensional"===this.propType)e=t*this.mult,1e-5<Math.abs(this.v-e)&&(this.v=e,this._mdf=!0);else for(var i=0,s=this.v.length;i<s;)e=t[i]*this.mult,1e-5<Math.abs(this.v[i]-e)&&(this.v[i]=e,this._mdf=!0),i+=1}},{key:"processEffectsSequence",value:function(t){if(this.expression&&(t=this.expression.update(t)),t!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;for(var e=this.effectsSequence.length,i=this.kf?this.pv:this.data.k,s=0;s<e;s+=1)i=this.effectsSequence[s](t);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=t}}},{key:"addEffect",value:function(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}]),t}(),Et=function(){u(o,Dt);var r=v(o);function o(t,e,i,s){var n;return x(this,o),(n=r.call(this)).propType="unidimensional",n.mult=i||1,n.data=e,n.v=i?e.k*i:e.k,n.pv=e.k,n._mdf=!1,n.elem=t,n.container=s,n.k=!1,n.kf=!1,n.vel=0,n.effectsSequence=[],n._isFirstFrame=!0,n.getValue=n.processEffectsSequence,n}return o}(),Ot=function(){u(h,Dt);var a=v(h);function h(t,e,i,s){var n;x(this,h),(n=a.call(this)).propType="multidimensional",n.mult=i||1,n.data=e,n._mdf=!1,n.elem=t,n.container=s,n.comp=t.comp,n.k=!1,n.kf=!1,n.frameId=-1;var r=e.k.length;n.v=it("float32",r),n.pv=it("float32",r),n.vel=it("float32",r);for(var o=0;o<r;o+=1)n.v[o]=e.k[o]*n.mult,n.pv[o]=e.k[o];return n._isFirstFrame=!0,n.effectsSequence=[],n.getValue=n.processEffectsSequence,n}return h}(),Ct=function(){u(o,Dt);var r=v(o);function o(t,e,i,s){var n;return x(this,o),(n=r.call(this)).propType="unidimensional",n.keyframes=e.k,n.frameId=-1,n._caching={lastFrame:yt,lastIndex:0,value:0,_lastKeyframeIndex:-1},n.k=!0,n.kf=!0,n.data=e,n.mult=i||1,n.elem=t,n.container=s,n.comp=t.comp,n.v=yt,n.pv=yt,n._isFirstFrame=!0,n.getValue=n.processEffectsSequence,n.effectsSequence=[n.getValueAtCurrentTime.bind(d(n))],n._hasOutTypeExpression=!1,bt.hasSupportExpression(e)&&(n.expression=bt.getExpression(e),n._hasOutTypeExpression="out"===n.expression.type),n}return o}(),At=function(){u(f,Dt);var c=v(f);function f(t,e,i,s){var n;x(this,f),(n=c.call(this)).propType="multidimensional";for(var r,o,a,h,p=e.k.length,l=0;l<p-1;l+=1)e.k[l].to&&e.k[l].s&&e.k[l+1]&&e.k[l+1].s&&(r=e.k[l].s,o=e.k[l+1].s,a=e.k[l].to,h=e.k[l].ti,(2===r.length&&(r[0]!==o[0]||r[1]!==o[1])&&mt.pointOnLine2D(r[0],r[1],o[0],o[1],r[0]+a[0],r[1]+a[1])&&mt.pointOnLine2D(r[0],r[1],o[0],o[1],o[0]+h[0],o[1]+h[1])||3===r.length&&(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2])&&mt.pointOnLine3D(r[0],r[1],r[2],o[0],o[1],o[2],r[0]+a[0],r[1]+a[1],r[2]+a[2])&&mt.pointOnLine3D(r[0],r[1],r[2],o[0],o[1],o[2],o[0]+h[0],o[1]+h[1],o[2]+h[2]))&&(e.k[l].to=null,e.k[l].ti=null),r[0]===o[0]&&r[1]===o[1]&&0===a[0]&&0===a[1]&&0===h[0]&&0===h[1]&&(2===r.length||r[2]===o[2]&&0===a[2]&&0===h[2])&&(e.k[l].to=null,e.k[l].ti=null));n.effectsSequence=[n.getValueAtCurrentTime.bind(d(n))],n.keyframes=e.k,n.k=!0,n.kf=!0,n._isFirstFrame=!0,n.mult=i||1,n.elem=t,n.container=s,n.comp=t.comp,n.getValue=n.processEffectsSequence,n.frameId=-1;var u=e.k[0].s.length;for(n.v=it("float32",u),n.pv=it("float32",u),l=0;l<u;l+=1)n.v[l]=yt,n.pv[l]=yt;return n._caching={lastFrame:yt,lastIndex:0,value:it("float32",u)},n._hasOutTypeExpression=!1,bt.hasSupportExpression(e)&&(n.expression=bt.getExpression(e),n._hasOutTypeExpression="out"===n.expression.type),n}return f}();var It={getProp:function(t,e,i,s,n){var r;if(e.k.length)if("number"==typeof e.k[0])r=new Ot(t,e,s,n);else switch(i){case 0:r=new Ct(t,e,s,n);break;case 1:r=new At(t,e,s,n)}else r=new Et(t,e,s,n);return r.effectsSequence.length&&n.addDynamicProperty(r),r}},Lt=function(){function t(){x(this,t)}return l(t,[{key:"interpolateShape",value:function(t,e,i){var s,n,r,o,a,h,p,l=i.lastIndex,u=this.keyframes;if(t<u[0].t)s=u[0].s[0],n=!0,l=0;else if(t>=u[u.length-1].t)s=u[u.length-1].s?u[u.length-1].s[0]:u[u.length-2].e[0],n=!0;else{for(var c,f,d,v,m,y=l,g=u.length-1,k=!0;k&&(c=u[y],!((f=u[y+1]).t>t));)y<g-1?y+=1:k=!1;l=y,(n=1===c.h)||(v=t>=f.t?1:t<c.t?0:(c.__fnct?d=c.__fnct:(d=st.getBezierEasing(c.o.x,c.o.y,c.i.x,c.i.y).get,c.__fnct=d),d((t-c.t)/(f.t-c.t))),m=f.s?f.s[0]:c.e[0]),s=c.s[0]}for(a=e._length,h=s.i[0].length,i.lastIndex=l,r=0;r<a;r+=1)for(o=0;o<h;o+=1)p=n?s.i[r][o]:s.i[r][o]+(m.i[r][o]-s.i[r][o])*v,e.i[r][o]=p,p=n?s.o[r][o]:s.o[r][o]+(m.o[r][o]-s.o[r][o])*v,e.o[r][o]=p,p=n?s.v[r][o]:s.v[r][o]+(m.v[r][o]-s.v[r][o])*v,e.v[r][o]=p}},{key:"interpolateShapeCurrentTime",value:function(t){var e=this.keyframes[0].t,i=this.keyframes[this.keyframes.length-1].t,s=this._caching.lastFrame;return s!==yt&&(s<e&&t<e||i<s&&i<t)||(this._caching.lastIndex=s<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}},{key:"resetShape",value:function(){this.paths=this.localShapeCollection}},{key:"shapesEqual",value:function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;for(var i=t._length,s=0;s<i;s+=1)if(t.v[s][0]!==e.v[s][0]||t.v[s][1]!==e.v[s][1]||t.o[s][0]!==e.o[s][0]||t.o[s][1]!==e.o[s][1]||t.i[s][0]!==e.i[s][0]||t.i[s][1]!==e.i[s][1])return!1;return!0}},{key:"setVValue",value:function(t){this.shapesEqual(this.v,t)||(this.v=Z.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}},{key:"processEffectsSequence",value:function(t){if(t!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;for(var e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,i=this.effectsSequence.length,s=0;s<i;s+=1)e=this.effectsSequence[s](t);this.setVValue(e),this.lock=!1,this.frameId=t}else this._mdf=!1}},{key:"addEffect",value:function(t){console.log("addEffect",t),this.effectsSequence.push(t),this.container.addDynamicProperty(this)}}]),t}(),Ft=function(){u(o,Lt);var r=v(o);function o(t,e,i){var s;x(this,o),(s=r.call(this)).propType="shape",s.comp=t.comp,s.container=t,s.elem=t,s.data=e,s.k=!1,s.kf=!1,s._mdf=!1;var n=3===i?e.pt.k:e.ks.k;return s.v=Z.clone(n),s.pv=Z.clone(s.v),s.localShapeCollection=nt.newShapeCollection(),s.paths=s.localShapeCollection,s.paths.addShape(s.v),s.reset=s.resetShape,s.effectsSequence=[],s.getValue=s.processEffectsSequence,s}return o}(),Xt=function(){u(o,Lt);var r=v(o);function o(t,e,i){var s;x(this,o),(s=r.call(this)).propType="shape",s.comp=t.comp,s.elem=t,s.container=t,s.keyframes=3===i?e.pt.k:e.ks.k,s.k=!0,s.kf=!0;var n=s.keyframes[0].s[0].i.length;return s.v=Z.newElement(),s.v.setPathData(s.keyframes[0].s[0].c,n),s.pv=Z.clone(s.v),s.localShapeCollection=nt.newShapeCollection(),s.paths=s.localShapeCollection,s.paths.addShape(s.v),s.lastFrame=yt,s.reset=s.resetShape,s._caching={lastFrame:yt,lastIndex:0},s.effectsSequence=[s.interpolateShapeCurrentTime.bind(d(s))],s.getValue=s.processEffectsSequence,s._hasOutTypeExpression=!1,bt.hasSupportExpression(e)&&(s.expression=bt.getExpression(e),s._hasOutTypeExpression="out"===s.expression.type),s}return o}(),Yt=function(){u(n,rt);var s=v(n);function n(t,e){var i;return x(this,n),(i=s.call(this)).v=Z.newElement(),i.v.setPathData(!0,4),i.localShapeCollection=nt.newShapeCollection(),i.paths=i.localShapeCollection,i.localShapeCollection.addShape(i.v),i.d=e.d,i.elem=t,i.comp=t.comp,i.frameId=-1,i.initDynamicPropertyContainer(t),i.p=It.getProp(t,e.p,1,0,d(i)),i.s=It.getProp(t,e.s,1,0,d(i)),i.dynamicProperties.length?i.k=!0:(i.k=!1,i.convertEllToPath()),i}return l(n,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t,this._mdf&&this.convertEllToPath())}},{key:"convertEllToPath",value:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,s=this.s.v[1]/2,n=3!==this.d,r=this.v;r.v[0][0]=t,r.v[0][1]=e-s,r.v[1][0]=n?t+i:t-i,r.v[1][1]=e,r.v[2][0]=t,r.v[2][1]=e+s,r.v[3][0]=n?t-i:t+i,r.v[3][1]=e,r.i[0][0]=n?t-i*Bt:t+i*Bt,r.i[0][1]=e-s,r.i[1][0]=n?t+i:t-i,r.i[1][1]=e-s*Bt,r.i[2][0]=n?t+i*Bt:t-i*Bt,r.i[2][1]=e+s,r.i[3][0]=n?t-i:t+i,r.i[3][1]=e+s*Bt,r.o[0][0]=n?t+i*Bt:t-i*Bt,r.o[0][1]=e-s,r.o[1][0]=n?t+i:t-i,r.o[1][1]=e+s*Bt,r.o[2][0]=n?t-i*Bt:t+i*Bt,r.o[2][1]=e+s,r.o[3][0]=n?t-i:t+i,r.o[3][1]=e-s*Bt}}]),n}(),Vt=function(){u(n,rt);var s=v(n);function n(t,e){var i;return x(this,n),(i=s.call(this)).v=Z.newElement(),i.v.setPathData(!0,0),i.elem=t,i.comp=t.comp,i.data=e,i.frameId=-1,i.d=e.d,i.initDynamicPropertyContainer(t),1===e.sy?(i.ir=It.getProp(t,e.ir,0,0,d(i)),i.is=It.getProp(t,e.is,0,.01,d(i)),i.convertToPath=i.convertStarToPath):i.convertToPath=i.convertPolygonToPath,i.pt=It.getProp(t,e.pt,0,0,d(i)),i.p=It.getProp(t,e.p,1,0,d(i)),i.r=It.getProp(t,e.r,0,gt,d(i)),i.or=It.getProp(t,e.or,0,0,d(i)),i.os=It.getProp(t,e.os,0,.01,d(i)),i.localShapeCollection=nt.newShapeCollection(),i.localShapeCollection.addShape(i.v),i.paths=i.localShapeCollection,i.dynamicProperties.length?i.k=!0:(i.k=!1,i.convertToPath()),i}return l(n,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertToPath())}},{key:"convertStarToPath",value:function(){var t,e,i,s=2*Math.floor(this.pt.v),n=2*Math.PI/s,r=!0,o=this.or.v,a=this.ir.v,h=this.os.v,p=this.is.v,l=2*Math.PI*o/(2*s),u=2*Math.PI*a/(2*s),c=-Math.PI/2;c+=this.r.v;for(var f=3===this.data.d?-1:1,d=this.v._length=0;d<s;d+=1){e=r?h:p,i=r?l:u;var v=(t=r?o:a)*Math.cos(c),m=t*Math.sin(c),y=0===v&&0===m?0:m/Math.sqrt(v*v+m*m),g=0===v&&0===m?0:-v/Math.sqrt(v*v+m*m);v+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(v,m,v-y*i*e*f,m-g*i*e*f,v+y*i*e*f,m+g*i*e*f,d,!0),r=!r,c+=n*f}}},{key:"convertPolygonToPath",value:function(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,s=this.or.v,n=this.os.v,r=2*Math.PI*s/(4*e),o=-Math.PI/2,a=3===this.data.d?-1:1;for(o+=this.r.v,t=this.v._length=0;t<e;t+=1){var h=s*Math.cos(o),p=s*Math.sin(o),l=0===h&&0===p?0:p/Math.sqrt(h*h+p*p),u=0===h&&0===p?0:-h/Math.sqrt(h*h+p*p);h+=+this.p.v[0],p+=+this.p.v[1],this.v.setTripleAt(h,p,h-l*r*n*a,p-u*r*n*a,h+l*r*n*a,p+u*r*n*a,t,!0),o+=i*a}this.paths.length=0,this.paths[0]=this.v}}]),n}(),Bt=.5519,Nt=function(){u(n,rt);var s=v(n);function n(t,e){var i;return x(this,n),(i=s.call(this)).v=Z.newElement(),i.v.c=!0,i.localShapeCollection=nt.newShapeCollection(),i.localShapeCollection.addShape(i.v),i.paths=i.localShapeCollection,i.elem=t,i.comp=t.comp,i.frameId=-1,i.d=e.d,i.initDynamicPropertyContainer(t),i.p=It.getProp(t,e.p,1,0,d(i)),i.s=It.getProp(t,e.s,1,0,d(i)),i.r=It.getProp(t,e.r,0,0,d(i)),i.dynamicProperties.length?i.k=!0:(i.k=!1,i.convertRectToPath()),i}return l(n,[{key:"reset",value:function(){this.paths=this.localShapeCollection}},{key:"getValue",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t),this._mdf&&this.convertRectToPath())}},{key:"convertRectToPath",value:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,s=this.s.v[1]/2,n=Math.min(i,s,this.r.v),r=n*(1-.5519);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-s+n,t+i,e-s+n,t+i,e-s+r,0,!0),this.v.setTripleAt(t+i,e+s-n,t+i,e+s-r,t+i,e+s-n,1,!0),0!==n?(this.v.setTripleAt(t+i-n,e+s,t+i-n,e+s,t+i-r,e+s,2,!0),this.v.setTripleAt(t-i+n,e+s,t-i+r,e+s,t-i+n,e+s,3,!0),this.v.setTripleAt(t-i,e+s-n,t-i,e+s-n,t-i,e+s-r,4,!0),this.v.setTripleAt(t-i,e-s+n,t-i,e-s+r,t-i,e-s+n,5,!0),this.v.setTripleAt(t-i+n,e-s,t-i+n,e-s,t-i+r,e-s,6,!0),this.v.setTripleAt(t+i-n,e-s,t+i-r,e-s,t+i-n,e-s,7,!0)):(this.v.setTripleAt(t-i,e+s,t-i+r,e+s,t-i,e+s,2),this.v.setTripleAt(t-i,e-s,t-i,e-s+r,t-i,e-s,3))):(this.v.setTripleAt(t+i,e-s+n,t+i,e-s+r,t+i,e-s+n,0,!0),0!==n?(this.v.setTripleAt(t+i-n,e-s,t+i-n,e-s,t+i-r,e-s,1,!0),this.v.setTripleAt(t-i+n,e-s,t-i+r,e-s,t-i+n,e-s,2,!0),this.v.setTripleAt(t-i,e-s+n,t-i,e-s+n,t-i,e-s+r,3,!0),this.v.setTripleAt(t-i,e+s-n,t-i,e+s-r,t-i,e+s-n,4,!0),this.v.setTripleAt(t-i+n,e+s,t-i+n,e+s,t-i+r,e+s,5,!0),this.v.setTripleAt(t+i-n,e+s,t+i-r,e+s,t+i-n,e+s,6,!0),this.v.setTripleAt(t+i,e+s-n,t+i,e+s-n,t+i,e+s-r,7,!0)):(this.v.setTripleAt(t-i,e-s,t-i+r,e-s,t-i,e-s,1,!0),this.v.setTripleAt(t-i,e+s,t-i,e+s-r,t-i,e+s,2,!0),this.v.setTripleAt(t+i,e+s,t+i-r,e+s,t+i,e+s,3,!0)))}}]),n}();var zt,qt,Rt,jt,Ut={getShapeProp:function(t,e,i){var s;return 3===i||4===i?s=new((3===i?e.pt:e.ks).k.length?Xt:Ft)(t,e,i):5===i?s=new Nt(t,e):6===i?s=new Yt(t,e):7===i&&(s=new Vt(t,e)),s.k&&t.addDynamicProperty(s),s},getConstructorFunction:function(){return Ft},getKeyframedConstructorFunction:function(){return Xt}},Ht=function(){u(h,rt);var a=v(h);function h(t,e,i){var s;x(this,h),(s=a.call(this)).frameId=-1,s.elem=t,s.session=i,s.masksProperties=e||[],s.initDynamicPropertyContainer(t),s.viewData=H(s.masksProperties.length);for(var n=s.masksProperties.length,r=!1,o=0;o<n;o++)"n"!==s.masksProperties[o].mode&&(r=!0),s.viewData[o]=Ut.getShapeProp(d(s),s.masksProperties[o],3),s.viewData[o].inv=s.masksProperties[o].inv;return s.hasMasks=r,s}return l(h,[{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}}]),h}(),Gt=(zt=Math.cos,qt=Math.sin,Rt=Math.tan,jt=Math.round,function(){this.reset=Wt,this.rotate=Kt,this.rotateX=Jt,this.rotateY=Zt,this.rotateZ=$t,this.skew=te,this.skewFromAxis=ee,this.shear=Qt,this.scale=ie,this.setTransform=se,this.translate=ne,this.transform=re,this.applyToPoint=le,this.applyToX=ue,this.applyToY=ce,this.applyToZ=fe,this.applyToPointArray=ye,this.applyToTriplePoints=me,this.applyToPointStringified=ge,this.toCSS=ke,this.to2dCSS=xe,this.clone=he,this.cloneFromProps=pe,this.equals=ae,this.inversePoints=ve,this.inversePoint=de,this._t=this.transform,this.isIdentity=oe,this._identity=!0,this._identityCalculated=!1,this.props=it("float32",16),this.reset()});function Wt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Kt(t){if(0===t)return this;var e=zt(t),i=qt(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function Jt(t){if(0===t)return this;var e=zt(t),i=qt(t);return this._t(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1)}function Zt(t){if(0===t)return this;var e=zt(t),i=qt(t);return this._t(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1)}function $t(t){if(0===t)return this;var e=zt(t),i=qt(t);return this._t(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}function Qt(t,e){return this._t(1,e,t,1,0,0)}function te(t,e){return this.shear(Rt(t),Rt(e))}function ee(t,e){var i=zt(e),s=qt(e);return this._t(i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Rt(t),1,0,0,0,0,1,0,0,0,0,1)._t(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1)}function ie(t,e,i){return i||0===i||(i=1),1===t&&1===e&&1===i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function se(t,e,i,s,n,r,o,a,h,p,l,u,c,f,d,v){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=s,this.props[4]=n,this.props[5]=r,this.props[6]=o,this.props[7]=a,this.props[8]=h,this.props[9]=p,this.props[10]=l,this.props[11]=u,this.props[12]=c,this.props[13]=f,this.props[14]=d,this.props[15]=v,this}function ne(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function re(t,e,i,s,n,r,o,a,h,p,l,u,c,f,d,v){var m=this.props;if(1===t&&0===e&&0===i&&0===s&&0===n&&1===r&&0===o&&0===a&&0===h&&0===p&&1===l&&0===u)return m[12]=m[12]*t+m[15]*c,m[13]=m[13]*r+m[15]*f,m[14]=m[14]*l+m[15]*d,m[15]=m[15]*v,this._identityCalculated=!1,this;var y=m[0],g=m[1],k=m[2],_=m[3],x=m[4],w=m[5],P=m[6],M=m[7],T=m[8],b=m[9],S=m[10],D=m[11],E=m[12],O=m[13],C=m[14],A=m[15];return m[0]=y*t+g*n+k*h+_*c,m[1]=y*e+g*r+k*p+_*f,m[2]=y*i+g*o+k*l+_*d,m[3]=y*s+g*a+k*u+_*v,m[4]=x*t+w*n+P*h+M*c,m[5]=x*e+w*r+P*p+M*f,m[6]=x*i+w*o+P*l+M*d,m[7]=x*s+w*a+P*u+M*v,m[8]=T*t+b*n+S*h+D*c,m[9]=T*e+b*r+S*p+D*f,m[10]=T*i+b*o+S*l+D*d,m[11]=T*s+b*a+S*u+D*v,m[12]=E*t+O*n+C*h+A*c,m[13]=E*e+O*r+C*p+A*f,m[14]=E*i+O*o+C*l+A*d,m[15]=E*s+O*a+C*u+A*v,this._identityCalculated=!1,this}function oe(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function ae(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function he(t){for(var e=0;e<16;e+=1)t.props[e]=this.props[e]}function pe(t){for(var e=0;e<16;e+=1)this.props[e]=t[e]}function le(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function ue(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function ce(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function fe(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function de(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],i=this.props[5]/e,s=-this.props[1]/e,n=-this.props[4]/e,r=this.props[0]/e,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e;return[t[0]*i+t[1]*n+o,t[0]*s+t[1]*r+a,0]}function ve(t){for(var e=t.length,i=[],s=0;s<e;s+=1)i[s]=de(t[s]);return i}function me(t,e,i){var s,n,r,o,a,h,p=it("float32",6);return this.isIdentity()?(p[0]=t[0],p[1]=t[1],p[2]=e[0],p[3]=e[1],p[4]=i[0],p[5]=i[1]):(s=this.props[0],n=this.props[1],r=this.props[4],o=this.props[5],a=this.props[12],h=this.props[13],p[0]=t[0]*s+t[1]*r+a,p[1]=t[0]*n+t[1]*o+h,p[2]=e[0]*s+e[1]*r+a,p[3]=e[0]*n+e[1]*o+h,p[4]=i[0]*s+i[1]*r+a,p[5]=i[0]*n+i[1]*o+h),p}function ye(t,e,i){var s=this.isIdentity()?[t,e,i]:[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]];return s}function ge(t,e){if(this.isIdentity())return t+","+e;var i=this.props;return Math.round(100*(t*i[0]+e*i[4]+i[12]))/100+","+Math.round(100*(t*i[1]+e*i[5]+i[13]))/100}function ke(){for(var t=0,e=this.props,i="matrix3d(";t<16;)i+=jt(1e4*e[t])/1e4,i+=15===t?")":",",t+=1;return i}function _e(t){return t<1e-6&&0<t||-1e-6<t&&t<0?jt(1e4*t)/1e4:t}function xe(){var t=this.props;return"matrix("+_e(t[0])+","+_e(t[1])+","+_e(t[4])+","+_e(t[5])+","+_e(t[12])+","+_e(t[13])+")"}function we(t,e){x(this,we),this.elem=t,this.pos=e}var Pe=function(){function t(){x(this,t),this.sequences={},this.sequenceList=[],this.transform_key_count=0}return l(t,[{key:"addTransformSequence",value:function(t){for(var e=t.length,i="_",s=0;s<e;s+=1)i+=t[s].transform.key+"_";var n=this.sequences[i];return n||(n={transforms:[].concat(t),finalTransform:new Gt,_mdf:!1},this.sequences[i]=n,this.sequenceList.push(n)),n}},{key:"processSequence",value:function(t,e){for(var i,s=0,n=e,r=t.transforms.length;s<r&&!e;){if(t.transforms[s].transform.mProps._mdf){n=!0;break}s+=1}if(n)for(t.finalTransform.reset(),s=r-1;0<=s;--s)i=t.transforms[s].transform.mProps.v.props,t.finalTransform.transform(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15]);t._mdf=n}},{key:"processSequences",value:function(t){for(var e=this.sequenceList.length,i=0;i<e;i+=1)this.processSequence(this.sequenceList[i],t)}},{key:"getNewKey",value:function(){return"_"+this.transform_key_count++}}]),t}(),Me=function(){function h(t,e,i,s){x(this,h),this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n=4;"rc"==e.ty?n=5:"el"==e.ty?n=6:"sr"==e.ty&&(n=7),this.sh=Ut.getShapeProp(t,e,n);for(var r,o=i.length,a=0;a<o;a+=1){i[a].closed||(r={transforms:s.addTransformSequence(i[a].transforms),trNodes:[]},this.styledShapes.push(r),i[a].elements.push(r))}}return l(h,[{key:"setAsAnimated",value:function(){this._isAnimated=!0}}]),h}(),Te={};var be={Type:{Null:"Null",Path:"Path",Shape:"Shape",Solid:"Solid",Sprite:"Sprite",Container:"Container"},setDisplayByType:function(t,e){Te[t]=e},getDisplayByType:function(t){return Te[t]}},Se=function(){function n(t,e,i){x(this,n),this.elem=t,this.data=e,this.type=e.ty,this.preTransforms=i,this.transforms=[],this.elements=[],this.closed=!0===e.hd,this.displayType=be.Type.Path;var s=be.getDisplayByType(this.displayType);this.display=new s(this,e),this.elem.display.addChild(this.display)}return l(n,[{key:"updateGrahpics",value:function(){this.display.updateLottieGrahpics(this)}}]),n}(),De=function(){u(a,rt);var o=v(a);function a(t,e,i){var s;if(x(this,a),(s=o.call(this)).elem=t,s.frameId=-1,s.propType="transform",s.data=e,s.v=new Gt,s.pre=new Gt,s.appliedTransformations=0,s.initDynamicPropertyContainer(i||t),e.p&&e.p.s?(s.px=It.getProp(t,e.p.x,0,0,d(s)),s.py=It.getProp(t,e.p.y,0,0,d(s)),e.p.z&&(s.pz=It.getProp(t,e.p.z,0,0,d(s)))):s.p=It.getProp(t,e.p||{k:[0,0,0]},1,0,d(s)),e.rx){if(s.rx=It.getProp(t,e.rx,0,gt,d(s)),s.ry=It.getProp(t,e.ry,0,gt,d(s)),s.rz=It.getProp(t,e.rz,0,gt,d(s)),e.or.k[0].ti)for(var n=e.or.k.length,r=0;r<n;r+=1)e.or.k[r].to=e.or.k[r].ti=null;s.or=It.getProp(t,e.or,1,gt,d(s)),s.or.sh=!0}else s.r=It.getProp(t,e.r||{k:0},0,gt,d(s));return e.sk&&(s.sk=It.getProp(t,e.sk,0,gt,d(s)),s.sa=It.getProp(t,e.sa,0,gt,d(s))),s.a=It.getProp(t,e.a||{k:[0,0,0]},1,0,d(s)),s.s=It.getProp(t,e.s||{k:[100,100,100]},1,.01,d(s)),e.o?s.o=It.getProp(t,e.o,0,.01,t):s.o={_mdf:!1,v:1},s._isDirty=!0,s.dynamicProperties.length||s.getValue(yt,!0),s}return l(a,[{key:"getValue",value:function(t,e){var i,s,n,r,o;t!==this.frameId&&(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),(this._mdf||e)&&(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime?s=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(i=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime)):this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime?(i=[],s=[],r=this.px,o=this.py,r._caching.lastFrame+r.offsetTime<=r.keyframes[0].t?(i[0]=r.getValueAtTime((r.keyframes[0].t+.01)/n,0),i[1]=o.getValueAtTime((o.keyframes[0].t+.01)/n,0),s[0]=r.getValueAtTime(r.keyframes[0].t/n,0),s[1]=o.getValueAtTime(o.keyframes[0].t/n,0)):r._caching.lastFrame+r.offsetTime>=r.keyframes[r.keyframes.length-1].t?(i[0]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/n,0),i[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/n,0),s[0]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/n,0),s[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/n,0)):(i=[r.pv,o.pv],s[0]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/n,r.offsetTime),s[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/n,o.offsetTime))):i=s=kt,this.v.rotate(-Math.atan2(i[1]-s[1],i[0]-s[0]))),this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),this.frameId=t)}},{key:"precalculateMatrix",value:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}},{key:"applyToMatrix",value:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}}]),a}();function Ee(t,e,i){return new De(t,e,i)}var Oe=function(){u(e,rt);var t=v(e);function e(){return x(this,e),t.apply(this,arguments)}return l(e,[{key:"initModifierProperties",value:function(){}},{key:"addShapeToModifier",value:function(){}},{key:"addShape",value:function(t){var e;this.closed||(t.sh.container.addDynamicProperty(t.sh),e={shape:t.sh,data:t,localShapeCollection:nt.newShapeCollection()},this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated())}},{key:"init",value:function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=yt,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)}},{key:"processKeys",value:function(t){t!==this.frameId&&(this.frameId=t,this.iterateDynamicProperties(t))}}]),e}(),Ce=function(){u(e,Oe);var t=v(e);function e(){return x(this,e),t.apply(this,arguments)}return l(e,[{key:"initModifierProperties",value:function(t,e){this.s=It.getProp(t,e.s,0,.01,this),this.e=It.getProp(t,e.e,0,.01,this),this.o=It.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length}},{key:"addShapeToModifier",value:function(t){t.pathsData=[]}},{key:"calculateShapeEdges",value:function(t,e,i,s,n){var r=[];e<=1?r.push({s:t,e:e}):1<=t?r.push({s:t-1,e:e-1}):(r.push({s:t,e:1}),r.push({s:0,e:e-1}));for(var o,a,h,p=[],l=r.length,u=0;u<l;u+=1){(h=r[u]).e*n<s||h.s*n>s+i||(a=o=void 0,o=h.s*n<=s?0:(h.s*n-s)/i,a=h.e*n>=s+i?1:(h.e*n-s)/i,p.push([o,a]))}return p.length||p.push([0,0]),p}},{key:"releasePathsData",value:function(t){for(var e=t.length,i=0;i<e;i+=1)at.release(t[i]);return t.length=0,t}},{key:"processShapes",value:function(t){var e,i,s,n,r;this._mdf||t?((e=this.o.v%360/360)<0&&(e+=1),s=(1<this.s.v?1:this.s.v<0?0:this.s.v)+e,(n=(1<this.e.v?1:this.e.v<0?0:this.e.v)+e)<s&&(i=s,s=n,n=i),s=1e-4*Math.round(1e4*s),n=1e-4*Math.round(1e4*n),this.sValue=s,this.eValue=n):(s=this.sValue,n=this.eValue);var o,a,h,p,l,u=this.shapes.length,c=0;if(n===s)for(m=0;m<u;m+=1)this.shapes[m].localShapeCollection.releaseShapes(),this.shapes[m].shape._mdf=!0,this.shapes[m].shape.paths=this.shapes[m].localShapeCollection,this._mdf&&(this.shapes[m].pathsData.length=0);else if(1===n&&0===s||0===n&&1===s){if(this._mdf)for(m=0;m<u;m+=1)this.shapes[m].pathsData.length=0,this.shapes[m].shape._mdf=!0}else{for(var f,d,v=[],m=0;m<u;m+=1)if((f=this.shapes[m]).shape._mdf||this._mdf||t||2===this.m){if(a=(r=f.shape.paths)._length,l=0,!f.shape._mdf&&f.pathsData.length)l=f.totalShapeLength;else{for(h=this.releasePathsData(f.pathsData),o=0;o<a;o+=1)p=mt.getSegmentsLength(r.shapes[o]),h.push(p),l+=p.totalLength;f.totalShapeLength=l,f.pathsData=h}c+=l,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var y,g=s,k=n,_=0;for(m=u-1;0<=m;--m)if((f=this.shapes[m]).shape._mdf){for((d=f.localShapeCollection).releaseShapes(),2===this.m&&1<u?(y=this.calculateShapeEdges(s,n,f.totalShapeLength,_,c),_+=f.totalShapeLength):y=[[g,k]],a=y.length,o=0;o<a;o+=1){g=y[o][0],k=y[o][1],v.length=0,k<=1?v.push({s:f.totalShapeLength*g,e:f.totalShapeLength*k}):1<=g?v.push({s:f.totalShapeLength*(g-1),e:f.totalShapeLength*(k-1)}):(v.push({s:f.totalShapeLength*g,e:f.totalShapeLength}),v.push({s:0,e:f.totalShapeLength*(k-1)}));var x,w=this.addShapes(f,v[0]);v[0].s!==v[0].e&&(1<v.length&&(w=f.shape.paths.shapes[f.shape.paths._length-1].c?(x=w.pop(),this.addPaths(w,d),this.addShapes(f,v[1],x)):(this.addPaths(w,d),this.addShapes(f,v[1]))),this.addPaths(w,d))}f.shape.paths=d}}}},{key:"addPaths",value:function(t,e){for(var i=t.length,s=0;s<i;s+=1)e.addShape(t[s])}},{key:"addSegment",value:function(t,e,i,s,n,r,o){n.setXYAt(e[0],e[1],"o",r),n.setXYAt(i[0],i[1],"i",r+1),o&&n.setXYAt(t[0],t[1],"v",r),n.setXYAt(s[0],s[1],"v",r+1)}},{key:"addSegmentFromArray",value:function(t,e,i,s){e.setXYAt(t[1],t[5],"o",i),e.setXYAt(t[2],t[6],"i",i+1),s&&e.setXYAt(t[0],t[4],"v",i),e.setXYAt(t[3],t[7],"v",i+1)}},{key:"addShapes",value:function(t,e,i){var s,n,r,o,a,h,p,l,u=t.pathsData,c=t.shape.paths.shapes,f=t.shape.paths._length,d=0,v=[],m=!0,y=i?(o=i._length,i._length):(i=Z.newElement(),o=0);for(v.push(i),s=0;s<f;s+=1){for(a=u[s].lengths,i.c=c[s].c,r=c[s].c?a.length:a.length+1,n=1;n<r;n+=1)if(d+(l=a[n-1]).addedLength<e.s)d+=l.addedLength,i.c=!1;else{if(d>e.e){i.c=!1;break}e.s<=d&&e.e>=d+l.addedLength?(this.addSegment(c[s].v[n-1],c[s].o[n-1],c[s].i[n],c[s].v[n],i,o,m),m=!1):(h=mt.getNewSegment(c[s].v[n-1],c[s].v[n],c[s].o[n-1],c[s].i[n],(e.s-d)/l.addedLength,(e.e-d)/l.addedLength,a[n-1]),this.addSegmentFromArray(h,i,o,m),m=!1,i.c=!1),d+=l.addedLength,o+=1}if(c[s].c&&a.length&&(l=a[n-1],d<=e.e?(p=a[n-1].addedLength,e.s<=d&&e.e>=d+p?(this.addSegment(c[s].v[n-1],c[s].o[n-1],c[s].i[0],c[s].v[0],i,o,m),m=!1):(h=mt.getNewSegment(c[s].v[n-1],c[s].v[0],c[s].o[n-1],c[s].i[0],(e.s-d)/p,(e.e-d)/p,a[n-1]),this.addSegmentFromArray(h,i,o,m),m=!1,i.c=!1)):i.c=!1,d+=l.addedLength,o+=1),i._length&&(i.setXYAt(i.v[y][0],i.v[y][1],"i",y),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),d>e.e)break;s<f-1&&(i=Z.newElement(),m=!0,v.push(i),o=0)}return v}}]),e}(),Ae=.5519,Ie=function(){u(e,Oe);var t=v(e);function e(){return x(this,e),t.apply(this,arguments)}return l(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.rd=It.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length}},{key:"processPath",value:function(t,e){var i=Z.newElement();i.c=t.c;for(var s,n,r,o,a,h,p,l,u,c,f,d,v=t._length,m=0,y=0;y<v;y+=1)s=t.v[y],r=t.o[y],n=t.i[y],s[0]===r[0]&&s[1]===r[1]&&s[0]===n[0]&&s[1]===n[1]?0!==y&&y!==v-1||t.c?(o=0===y?t.v[v-1]:t.v[y-1],h=(a=Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)))?Math.min(a/2,e)/a:0,p=f=s[0]+(o[0]-s[0])*h,l=d=s[1]-(s[1]-o[1])*h,u=p-(p-s[0])*Ae,c=l-(l-s[1])*Ae,i.setTripleAt(p,l,u,c,f,d,m),m+=1,o=y===v-1?t.v[0]:t.v[y+1],h=(a=Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)))?Math.min(a/2,e)/a:0,p=u=s[0]+(o[0]-s[0])*h,l=c=s[1]+(o[1]-s[1])*h,f=p-(p-s[0])*Ae,d=l-(l-s[1])*Ae,i.setTripleAt(p,l,u,c,f,d,m)):i.setTripleAt(s[0],s[1],r[0],r[1],n[0],n[1],m):i.setTripleAt(t.v[y][0],t.v[y][1],t.o[y][0],t.o[y][1],t.i[y][0],t.i[y][1],m),m+=1;return i}},{key:"processShapes",value:function(t){var e,i,s,n=this.shapes.length,r=this.rd.v;if(0!==r)for(var o,a,h=0;h<n;h+=1){if(a=(o=this.shapes[h]).localShapeCollection,o.shape._mdf||this._mdf||t)for(a.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,s=o.shape.paths._length,i=0;i<s;i+=1)a.addShape(this.processPath(e[i],r));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)}}]),e}(),Le=function(){u(e,Oe);var t=v(e);function e(){return x(this,e),t.apply(this,arguments)}return l(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.c=It.getProp(t,e.c,0,null,this),this.o=It.getProp(t,e.o,0,null,this),this.tr=Ee(t,e.tr,this),this.so=It.getProp(t,e.tr.so,0,.01,this),this.eo=It.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Gt,this.rMatrix=new Gt,this.sMatrix=new Gt,this.tMatrix=new Gt,this.matrix=new Gt}},{key:"applyTransforms",value:function(t,e,i,s,n,r){var o=r?-1:1,a=s.s.v[0]+(1-s.s.v[0])*(1-n),h=s.s.v[1]+(1-s.s.v[1])*(1-n);t.translate(s.p.v[0]*o*n,s.p.v[1]*o*n,s.p.v[2]),e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),e.rotate(-s.r.v*o*n),e.translate(s.a.v[0],s.a.v[1],s.a.v[2]),i.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),i.scale(r?1/a:a,r?1/h:h),i.translate(s.a.v[0],s.a.v[1],s.a.v[2])}},{key:"init",value:function(t,e,i,s){for(this.elem=t,this.arr=e,this.pos=i,this.elemsData=s,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[i]);0<i;)--i,this._elements.unshift(e[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)}},{key:"resetElements",value:function(t){for(var e=t.length,i=0;i<e;i+=1)t[i]._processed=!1,"gr"===t[i].ty&&this.resetElements(t[i].it)}},{key:"cloneElements",value:function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e}},{key:"changeGroupRender",value:function(t,e){for(var i=t.length,s=0;s<i;s+=1)t[s]._render=e,"gr"===t[s].ty&&this.changeGroupRender(t[s].it,e)}},{key:"processShapes",value:function(t){if(this._mdf||t){var e=Math.ceil(this.c.v);if(this._groups.length<e){for(;this._groups.length<e;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes()}for(var s,n=0,r=0;r<=this._groups.length-1;r+=1)s=n<e,this._groups[r]._render=s,this.changeGroupRender(this._groups[r].it,s),n+=1;this._currentCopies=e;var o=this.o.v,a=o%1,h=0<o?Math.floor(o):Math.ceil(o),p=this.pMatrix.props,l=this.rMatrix.props,u=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var c=0;if(0<o){for(;c<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),c+=1;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,a,!1),c+=a)}else if(o<0){for(;h<c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),--c;a&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-a,!0),c-=a)}r=1===this.data.m?0:this._currentCopies-1;for(var f=1===this.data.m?1:-1,n=this._currentCopies;n;){var d=this.elemsData[r].it,v=d[d.length-1].transform.mProps.v.props,m=v.length;if(d[d.length-1].transform.mProps._mdf=!0,d[d.length-1].transform.op._mdf=!0,d[d.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==c){(0!==r&&1==f||r!==this._currentCopies-1&&-1==f)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]);for(var y=0;y<m;y+=1)v[y]=this.matrix.props[y];this.matrix.reset()}else{this.matrix.reset();for(var g=0;g<m;g+=1)v[g]=this.matrix.props[g]}c+=1,--n,r+=f}}else for(var k=this._currentCopies,_=0;k;){var x=this.elemsData[_].it;x[x.length-1].transform.mProps._mdf=!1,x[x.length-1].transform.op._mdf=!1,--k,_+=1}}},{key:"addShape",value:function(){}}]),e}(),Fe=function(){u(e,Oe);var t=v(e);function e(){return x(this,e),t.apply(this,arguments)}return l(e,[{key:"initModifierProperties",value:function(t,e){this.getValue=this.processKeys,this.data=e,this.positions=[]}},{key:"processKeys",value:function(t,e){t===this.frameId&&!e||(this._mdf=!0)}},{key:"addShapeToModifier",value:function(){this.positions.push([])}},{key:"processPath",value:function(t,e,i){for(var s,n,r,o=t.v.length,a=[],h=[],p=[],l=0;l<o;l+=1){i.v[l]||(i.v[l]=[t.v[l][0],t.v[l][1]],i.o[l]=[t.o[l][0],t.o[l][1]],i.i[l]=[t.i[l][0],t.i[l][1]],i.distV[l]=0,i.distO[l]=0,i.distI[l]=0),s=Math.atan2(t.v[l][1]-e[1],t.v[l][0]-e[0]),n=e[0]-i.v[l][0],r=e[1]-i.v[l][1];var u=Math.sqrt(n*n+r*r);i.distV[l]+=(u-i.distV[l])*this.data.dc,i.v[l][0]=Math.cos(s)*Math.max(0,this.data.maxDist-i.distV[l])/2+t.v[l][0],i.v[l][1]=Math.sin(s)*Math.max(0,this.data.maxDist-i.distV[l])/2+t.v[l][1],s=Math.atan2(t.o[l][1]-e[1],t.o[l][0]-e[0]),n=e[0]-i.o[l][0],r=e[1]-i.o[l][1],u=Math.sqrt(n*n+r*r),i.distO[l]+=(u-i.distO[l])*this.data.dc,i.o[l][0]=Math.cos(s)*Math.max(0,this.data.maxDist-i.distO[l])/2+t.o[l][0],i.o[l][1]=Math.sin(s)*Math.max(0,this.data.maxDist-i.distO[l])/2+t.o[l][1],s=Math.atan2(t.i[l][1]-e[1],t.i[l][0]-e[0]),n=e[0]-i.i[l][0],r=e[1]-i.i[l][1],u=Math.sqrt(n*n+r*r),i.distI[l]+=(u-i.distI[l])*this.data.dc,i.i[l][0]=Math.cos(s)*Math.max(0,this.data.maxDist-i.distI[l])/2+t.i[l][0],i.i[l][1]=Math.sin(s)*Math.max(0,this.data.maxDist-i.distI[l])/2+t.i[l][1],a.push(i.v[l]),h.push(i.o[l]),p.push(i.i[l])}return{v:a,o:h,i:p,c:t.c}}},{key:"processShapes",value:function(){var t,e,i,s=this.elem.globalData.mouseX,n=this.elem.globalData.mouseY,r=this.shapes.length;if(s)for(var o,a=this.elem.globalToLocal([s,n,0]),h=[],p=0;p<r;p+=1)if((o=this.shapes[p]).shape._mdf||this._mdf){for(o.shape._mdf=!0,i=(t=o.shape.paths).length,e=0;e<i;e+=1)this.positions[p][e]||(this.positions[p][e]={v:[],o:[],i:[],distV:[],distO:[],distI:[]}),h.push(this.processPath(t[e],a,this.positions[p][e]));o.shape.paths=h,o.last=h}else o.shape.paths=o.last}}]),e}(),Xe={};function Ye(t,e){Xe[t]||(Xe[t]=e)}Ye("tm",Ce),Ye("rd",Ie),Ye("rp",Le),Ye("ms",Fe);var Ve,Be,Ne,ze={getModifier:function(t,e,i){return new Xe[t](e,i)}},qe=function(){u(h,rt);var a=v(h);function h(t,e,i){var s;x(this,h),(s=a.call(this)).elem=t,s.frameId=-1,s.dataProps=H(e.length),s.k=!1,s.dashArray=it("float32",e.length?e.length-1:0),s.dashoffset=it("float32",1),s.initDynamicPropertyContainer(i);for(var n,r=e.length||0,o=0;o<r;o+=1)n=It.getProp(t,e[o].v,0,0,d(s)),s.k=n.k||s.k,s.dataProps[o]={n:e[o].n,p:n};return s.k||s.getValue(!0),s._isAnimated=s.k,s}return l(h,[{key:"getValue",value:function(t,e){if((t!==this.frameId||e)&&(this.frameId=t,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf))for(var i=0,s=this.dataProps.length,i=0;i<s;i+=1)"o"!=this.dataProps[i].n?this.dashArray[i]=this.dataProps[i].p.v:this.dashoffset[0]=this.dataProps[i].p.v}}]),h}(),Re=function(){u(o,rt);var r=v(o);function o(t,e,i){var s;x(this,o),(s=r.call(this)).data=e,s.c=it("uint8c",4*e.p);var n=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;return s.o=it("float32",n),s._cmdf=!1,s._omdf=!1,s._collapsable=s.checkCollapsable(),s._hasOpacity=n,s.initDynamicPropertyContainer(i),s.prop=It.getProp(t,e.k,1,null,d(s)),s.k=s.prop.k,s.getValue(!0),s}return l(o,[{key:"comparePoints",value:function(t,e){for(var i=0,s=this.o.length/2;i<s;){if(.01<Math.abs(t[4*i]-t[4*e+2*i]))return!1;i+=1}return!0}},{key:"checkCollapsable",value:function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0}},{key:"getValue",value:function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){for(var e,i,s=4*this.data.p,n=0;n<s;n+=1)e=n%4==0?100:255,i=Math.round(this.prop.v[n]*e),this.c[n]!==i&&(this.c[n]=i,this._cmdf=!t);if(this.o.length)for(s=this.prop.v.length,n=4*this.data.p;n<s;n+=1)e=n%2==0?100:1,i=n%2==0?Math.round(100*this.prop.v[n]):this.prop.v[n],this.o[n-4*this.data.p]!==i&&(this.o[n-4*this.data.p]=i,this._omdf=!t);this._mdf=!t}}}]),o}(),je=function(){u(r,rt);var n=v(r);function r(t,e,i){var s;return x(this,r),(s=n.call(this)).frameId=-1,s.keyframesManager=t,s.elem=t.elem,s.session=i,s.shapes=[],s.shapesData=e,s.stylesList=[],s.itemsData=[],s.prevViewData=[],s.shapeModifiers=[],s.processedElements=[],s.transformsManager=new Pe,s.initDynamicPropertyContainer(t),s.lcEnum={1:"butt",2:"round",3:"square"},s.ljEnum={1:"miter",2:"round",3:"bevel"},s._isFirstFrame=!0,s.transformHelper={opacity:1,_opMdf:!1},s.searchShapes(s.shapesData,s.itemsData,s.prevViewData,!0,[]),s._isAnimated||(s.transformHelper.opacity=1,s.transformHelper._opMdf=!1,s.updateModifiers(s.frameId),s.transformsManager.processSequences(s._isFirstFrame),s.updateShape(s.transformHelper,s.shapesData,s.itemsData),s.updateGrahpics()),s}return l(r,[{key:"createStyleElement",value:function(t,e){var i,s=new Se(this.elem,t,this.transformsManager.addTransformSequence(e)),n={};return"fl"==t.ty||"st"==t.ty?(n.c=It.getProp(this,t.c,1,255,this),n.c.k||(s.co=n.c.v)):"gf"!==t.ty&&"gs"!==t.ty||(n.s=It.getProp(this,t.s,1,null,this),n.e=It.getProp(this,t.e,1,null,this),n.h=It.getProp(this,t.h||{k:0},0,.01,this),n.a=It.getProp(this,t.a||{k:0},0,gt,this),n.g=new Re(this,t.g,this)),n.o=It.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty?(s.lc=this.lcEnum[t.lc]||"round",s.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(s.ml=t.ml),n.w=It.getProp(this,t.w,0,null,this),n.w.k||(s.wi=n.w.v),t.d&&(i=new qe(this,t.d,"canvas",this),n.d=i,n.d.k||(s.da=n.d.dashArray,s.do=n.d.dashoffset[0]))):s.r=2===t.r?"evenodd":"nonzero",this.stylesList.push(s),n.style=s,n}},{key:"addShapeToModifiers",value:function(t){for(var e=this.shapeModifiers.length,i=0;i<e;i+=1)this.shapeModifiers[i].addShape(t)}},{key:"isShapeInAnimatedModifiers",value:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1}},{key:"updateModifiers",value:function(t){if(this.shapeModifiers.length){for(var e=this.shapes.length,i=0;i<e;i+=1)this.shapes[i].sh.reset();for(i=(e=this.shapeModifiers.length)-1;0<=i;--i)this.shapeModifiers[i].processShapes(t,this._isFirstFrame)}}},{key:"searchProcessedElement",value:function(t){for(var e=this.processedElements,i=0,s=e.length;i<s;){if(e[i].elem===t)return e[i].pos;i+=1}return 0}},{key:"addProcessedElement",value:function(t,e){for(var i=this.processedElements,s=i.length;s;)if(i[--s].elem===t)return void(i[s].pos=e);i.push(new we(t,e))}},{key:"createGroupElement",value:function(){return{it:[],prevViewData:[]}}},{key:"createTransformElement",value:function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:It.getProp(this,t.o,0,.01,this),mProps:Ee(this,t,this)}}}},{key:"createShapeElement",value:function(t){var e=new Me(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e}},{key:"reloadShapes",value:function(){this._isFirstFrame=!0;for(var t=this.itemsData.length,e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.updateModifiers(),this.transformsManager.processSequences(this._isFirstFrame)}},{key:"addTransformToStyleList",value:function(t){for(var e=this.stylesList.length,i=0;i<e;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.push(t)}},{key:"removeTransformFromStyleList",value:function(){for(var t=this.stylesList.length,e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()}},{key:"closeStyles",value:function(t){for(var e=t.length,i=0;i<e;i+=1)t[i].closed=!0}},{key:"searchShapes",value:function(t,e,i,s,n){for(var r,o,a,h,p,l=t.length-1,u=[],c=[],f=[].concat(n),d=l;0<=d;--d){if((a=this.searchProcessedElement(t[d]))?e[d]=i[a-1]:t[d]._shouldRender=s,"fl"==t[d].ty||"st"==t[d].ty||"gf"==t[d].ty||"gs"==t[d].ty)a?e[d].style.closed=!1:e[d]=this.createStyleElement(t[d],f),u.push(e[d].style);else if("gr"==t[d].ty){if(a)for(o=e[d].it.length,r=0;r<o;r+=1)e[d].prevViewData[r]=e[d].it[r];else e[d]=this.createGroupElement(t[d]);this.searchShapes(t[d].it,e[d].it,e[d].prevViewData,s,f)}else"tr"==t[d].ty?(a||(p=this.createTransformElement(t[d]),e[d]=p),f.push(e[d]),this.addTransformToStyleList(e[d])):"sh"==t[d].ty||"rc"==t[d].ty||"el"==t[d].ty||"sr"==t[d].ty?a||(e[d]=this.createShapeElement(t[d])):"tm"==t[d].ty||"rd"==t[d].ty?(a?(h=e[d]).closed=!1:((h=ze.getModifier(t[d].ty)).init(this,t[d]),e[d]=h,this.shapeModifiers.push(h)),c.push(h)):"rp"==t[d].ty&&(a?(h=e[d]).closed=!0:(h=ze.getModifier(t[d].ty),(e[d]=h).init(this,t,d,e),this.shapeModifiers.push(h),s=!1),c.push(h));this.addProcessedElement(t[d],d+1)}for(this.removeTransformFromStyleList(),this.closeStyles(u),l=c.length,d=0;d<l;d+=1)c[d].closed=!0}},{key:"updateShapeTransform",value:function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)}},{key:"updateStyledShape",value:function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,s,n=t.trNodes,r=e.paths,o=r._length;n.length=0;for(var a=t.transforms.finalTransform,h=0;h<o;h+=1){var p=r.shapes[h];if(p&&p.v){for(s=p._length,i=1;i<s;i+=1)1===i&&n.push({t:"m",p:a.applyToPointArray(p.v[0][0],p.v[0][1],0)}),n.push({t:"c",pts:a.applyToTriplePoints(p.o[i-1],p.i[i],p.v[i])});1===s&&n.push({t:"m",p:a.applyToPointArray(p.v[0][0],p.v[0][1],0)}),p.c&&s&&(n.push({t:"c",pts:a.applyToTriplePoints(p.o[i-1],p.i[0],p.v[0])}),n.push({t:"z"}))}}t.trNodes=n}}},{key:"updatePath",value:function(t,e){if(!0!==t.hd&&t._shouldRender)for(var i=e.styledShapes.length,s=0;s<i;s+=1)this.updateStyledShape(e.styledShapes[s],e.sh)}},{key:"updateFill",value:function(t,e,i){var s=e.style;(e.c._mdf||this._isFirstFrame)&&(s.co=e.c.v),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity)}},{key:"updateStroke",value:function(t,e,i){var s=e.style,n=e.d;n&&(n._mdf||this._isFirstFrame)&&(s.da=n.dashArray,s.do=n.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(s.co=e.c.v),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity),(e.w._mdf||this._isFirstFrame)&&(s.wi=e.w.v)}},{key:"updateGradientFill",value:function(t,e,i){var s=e.style;s.grd=e.g.c[0],s.coOp=e.o.v*i.opacity}},{key:"updateShape",value:function(t,e,i){for(var s=t,n=e.length-1;0<=n;--n)"tr"==e[n].ty?(s=i[n].transform,this.updateShapeTransform(t,s)):"sh"==e[n].ty||"el"==e[n].ty||"rc"==e[n].ty||"sr"==e[n].ty?this.updatePath(e[n],i[n]):"fl"==e[n].ty?this.updateFill(e[n],i[n],s):"st"==e[n].ty?this.updateStroke(e[n],i[n],s):"gf"==e[n].ty||"gs"==e[n].ty?this.updateGradientFill(e[n],i[n],s):"gr"==e[n].ty&&this.updateShape(s,e[n].it,i[n].it)}},{key:"updateGrahpics",value:function(){for(var t=this.stylesList.length,e=0;e<t;e+=1){this.stylesList[e].updateGrahpics()}}},{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.updateModifiers(t),this.transformsManager.processSequences(this._isFirstFrame),this.updateShape(this.transformHelper,this.shapesData,this.itemsData),this.updateGrahpics(),this.frameId=t)}}]),r}(),Ue=function(){u(r,De);var n=v(r);function r(t,e,i){var s;return x(this,r),(s=n.call(this,t,e)).frameId=-1,s.hs=e,s.session=i,s}return l(r,[{key:"getValue",value:function(t){t!==this.frameId&&(this.iterateDynamicProperties(t),this.frameId=t)}},{key:"x",get:function(){return this.p?this.p.v[0]:this.px.v}},{key:"y",get:function(){return this.p?this.p.v[1]:this.py.v}},{key:"anchorX",get:function(){return this.a.v[0]}},{key:"anchorY",get:function(){return this.a.v[1]}},{key:"scaleX",get:function(){return this.s.v[0]}},{key:"scaleY",get:function(){return this.s.v[1]}},{key:"rotation",get:function(){return this.r.v}},{key:"alpha",get:function(){return this.o.v}}]),r}(),He=function(){function e(t){x(this,e),this.elem=t,this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1,this.transform=null,this.masks=null,this.shapes=null,this._hasOutTypeExpression=!1,this.needUpdateOverlap=!1,this.isOverlapMode=!1,this.visible=!0}return l(e,[{key:"initFrame",value:function(t,e){this.layer=t;var i=e.local,s=e.global;this.session=e,this.isOverlapLayer=this.layer.op>=i.op-i.st,this.isOverlapMode=s.overlapMode,this.parseLayer(t,e)}},{key:"outTypeExpressionMode",value:function(){this._hasOutTypeExpression=!0,this.isOverlapLayer&&(this.needUpdateOverlap=!0)}},{key:"prepareProperties",value:function(t,e){for(var i=this.dynamicProperties.length,s=0;s<i;s+=1)(e||this.needUpdateOverlap||this.elem._isParent&&"transform"===this.dynamicProperties[s].propType)&&(this.dynamicProperties[s].getValue(t),this.dynamicProperties[s]._mdf&&(this._mdf=!0))}},{key:"addDynamicProperty",value:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},{key:"parseLayer",value:function(t,e){var i,s=t.ks,n=t.hasMask,r=t.masksProperties,o=t.shapes,a=t.tm;s&&(this.transform=new Ue(this,s,e)),n&&(this.masks=new Ht(this,r,e)),o&&(this.shapes=new je(this,o,e)),a&&(i=e.global.frameRate,this.tm=It.getProp(this,a,0,i,this))}},{key:"updateFrame",value:function(t){this._mdf=!1;var e=w.inRange(t,this.layer.ip,this.layer.op);this.isOverlapMode&&this.isOverlapLayer?this.visible=t>=this.layer.ip:this.visible=e,this.prepareProperties(t,e)}},{key:"updateDisplay",value:function(){var t=this.elem.display;this.elem._isRoot||(this.visible?t.show():t.hide()),this.transform&&t.updateLottieTransform(this.transform),this.masks&&t.updateLottieMasks(this.masks)}}]),e}(),Ge=function(){function e(t){x(this,e),this.data=t,void 0===this.data.sr&&(this.data.sr=1),this.offsetTime=t.st||0,this.bodymovin=new He(this),this.displayType="",this.display=null,this.hierarchy=null,this.lottieTreeParent=null}return l(e,[{key:"setHierarchy",value:function(t){this.hierarchy=t,this.display.setHierarchy(t.display)}},{key:"initDisplayInstance",value:function(t,e){return new(be.getDisplayByType(t))(this,e)}},{key:"updateFrame",value:function(t){this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay()}}]),e}(),We=function(){u(p,Ge);var h=v(p);function p(t,e){var i;x(this,p),i=h.call(this,t);var s=e.global.maskComp,n=e.local,r=n.w,o=n.h,a={layer:t,session:i.session=e};return s&&(a.maskComp=s,a.viewport={x:0,y:0,width:r,height:o}),i.config=a,i.childNodes=[],i.displayType=be.Type.Container,i.display=i.initDisplayInstance(i.displayType,a),i.bodymovin.initFrame(t,e),i}return l(p,[{key:"updateFrame",value:function(t){var e;this.bodymovin.updateFrame(t),this.bodymovin.updateDisplay(),t-=this.offsetTime,this.bodymovin.tm?((e=this.bodymovin.tm.v)===this.data.op&&(e=this.data.op-1),t=e):t/=this.data.sr;for(var i=0;i<this.childNodes.length;i++)this.childNodes[i].updateFrame(t)}},{key:"addChild",value:function(t){(t.lottieTreeParent=this).childNodes.push(t),this.display.addChild(t.display)}}]),p}(),Ke=function(){u(r,Ge);var n=v(r);function r(t,e){var i;x(this,r),i=n.call(this,t);var s={layer:t,session:e,rect:{x:0,y:0,width:t.sw,height:t.sh},color:t.sc};return i.config=s,i.session=e,i.displayType=be.Type.Solid,i.display=i.initDisplayInstance(i.displayType,s),i.bodymovin.initFrame(t,e),i}return r}(),Je=function(){u(p,Ge);var h=v(p);function p(t,e){var i;x(this,p),i=h.call(this,t);var s=e.global,n=s.loader,r=s.assets,o=w.getAssets(t.refId,r),a={layer:t,session:e,texture:n.getTextureById(o.id),asset:o};return i.config=a,i.session=e,i.displayType=be.Type.Sprite,i.display=i.initDisplayInstance(i.displayType,a),i.bodymovin.initFrame(t,e),i}return p}(),Ze=function(){u(r,Ge);var n=v(r);function r(t,e){var i;x(this,r);var s={layer:t,session:e};return(i=n.call(this,t)).config=s,i.session=e,i.displayType=be.Type.Container,i.display=i.initDisplayInstance(i.displayType,s),i.bodymovin.initFrame(t,e),i}return r}(),$e=function(){u(r,Ge);var n=v(r);function r(t,e){var i;x(this,r);var s={layer:t,session:e};return(i=n.call(this,t)).config=s,i.session=e,i.displayType=be.Type.Container,i.display=i.initDisplayInstance(i.displayType,s),i.bodymovin.initFrame(t,e),i}return r}(),Qe=function(){u(_,m);var k=v(_);function _(t,e){var i;x(this,_),(i=k.call(this)).living=!0,i.infinite=t.infinite||!1,i.repeats=t.repeats||0,i.alternate=t.alternate||!1,i.wait=t.wait||0,i.delay=t.delay||0,i.overlapMode=t.overlapMode||!1,i.timeScale=w.isNumber(t.timeScale)?t.timeScale:1,i.frameNum=0,i._pf=-1/0,i.direction=1,i._repeatsCut=i.repeats,i._delayCut=i.delay,i._waitCut=i.wait,i._paused=!0;var s=w.copyJSON(t.keyframes);X.completeData(s);var n=s.fr,r=s.ip,o=s.op,a=s.assets,h=s.prefix;i.frameRate=n,i.frameMult=n/1e3,i.keyframes=s,i.defaultSegment=[r,o],i.segments=t.segments||{};var p=t.initSegment||"",l=p&&i.segments[p]||i.defaultSegment;i.beginFrame=l[0],i.endFrame=l[1],i.prefix=t.prefix||h||"",i._tpf=1e3/n,i.duration=Math.floor(i.endFrame-i.beginFrame);var u,c=!w.isBoolean(t.autoLoad)||t.autoLoad,f=!w.isBoolean(t.autoStart)||t.autoStart,d=null,v=a.filter(function(t){return t.u||t.p});0<v.length?(u=M.getLoader(),i.loader=d=new u(v,{prefix:i.prefix,autoLoad:c}),i._imageLoadHandle=function(){i._paused=!f},i._cancelImageLoadHandle=function(){d.off("complete",i._imageLoadHandle),i._cancelImageLoadHandle=null},d.once("complete",i._imageLoadHandle)):(i._cancelImageLoadHandle=null,i._paused=!f);var m=new P;i.register=m;var y=!w.isBoolean(t.maskComp)||t.maskComp,g={global:{assets:a,loader:d,register:m,maskComp:y,frameRate:n,overlapMode:i.overlapMode},local:{parentName:""}};return i.root=i.extraCompositions(i.keyframes,g),i.root._isRoot=!0,i.group=i.rootDisplay=i.root.display,i}return l(_,[{key:"extraCompositions",value:function(t,e){for(var i=e.global,s=e.local,n=t.w,r=t.h,o=t.ip,a=t.op,h=t.st,p=void 0===h?0:h,l=t.nm,u=void 0===l?"null":l,c=s.parentName?s.parentName+"."+u:u,f=new We(t,{global:i,local:s}),d=t.layers||w.getAssets(t.refId,i.assets).layers,v={global:i,local:{w:n,h:r,ip:o,op:a,st:p,parentName:c}},m=this.createElements(d,v),y=d.length-1;0<=y;y--){var g,k,_=d[y],x=m[_.ind];x&&(w.isUndefined(_.parent)||((g=m[_.parent])._isParent=!0,x.setHierarchy(g)),k=c+"."+x.name,i.register.setLayer(k,x),f.addChild(x))}return f}},{key:"createElements",value:function(t,e){for(var i={},s=t.length-1;0<=s;s--){var n=t[s],r=null;if(void 0===n.td){switch(n.ty){case 0:r=this.extraCompositions(n,e);break;case 1:r=new Ke(n,e);break;case 2:r=new Je(n,e);break;case 3:r=new $e(n,e);break;case 4:r=new Ze(n,e);break;default:continue}r&&(void 0===n.ind&&(n.ind=s),(i[n.ind]=r).name=n.nm||"null")}}return i}},{key:"getDisplayByName",value:function(t){var e=this.register.getLayer(t);return e.display?e.display:(console.warn("can not find display name as ",t),null)}},{key:"bindSlot",value:function(t,e){return this.getDisplayByName(t).addChild(e),this}},{key:"unbindSlot",value:function(t,e){return this.getDisplayByName(t).removeChild(e),this}},{key:"emitFrame",value:function(t){this.emit("@".concat(t))}},{key:"update",value:function(t){var e,i,s;this.living&&(e=this.updateTime(t),i=this.beginFrame+this.frameNum,this.root.updateFrame(i),s=i>>0,this._pf!==s&&(this.emitFrame(0<this.direction?s:this._pf),this._pf=s),!1===e?this.emit("update",this.frameNum/this.duration):this.hadEnded!==e&&!0===e&&this.emit("complete"),this.hadEnded=e)}},{key:"updateTime",value:function(t){var e=this.direction*this.timeScale*t;if(0<this._waitCut)return this._waitCut-=Math.abs(e),null;if(this._paused||0<this._delayCut)return 0<this._delayCut&&(this._delayCut-=Math.abs(e)),null;this.frameNum+=e/this._tpf;var i=!1;return this.spill()&&(0<this._repeatsCut||this.infinite?(0<this._repeatsCut&&--this._repeatsCut,this._delayCut=this.delay,this.alternate?(this.direction*=-1,this.frameNum=w.codomainBounce(this.frameNum,0,this.duration)):(this.direction=1,this.frameNum=w.euclideanModulo(this.frameNum,this.duration))):(this.overlapMode||(this.frameNum=w.clamp(this.frameNum,0,this.duration),this.living=!1),i=!0)),i}},{key:"spill",value:function(){var t=this.frameNum<=0&&-1===this.direction,e=this.frameNum>=this.duration&&1===this.direction;return t||e}},{key:"frameToTime",value:function(t){return t*this._tpf}},{key:"setSpeed",value:function(t){this.timeScale=t}},{key:"playSegment",value:function(t,e){var i,s=1<arguments.length&&void 0!==e?e:{};t&&(this._cancelImageLoadHandle&&this._cancelImageLoadHandle(),i=null,w.isArray(t)?i=t:w.isString(t)&&(i=this.segments[t]),i&&(this.beginFrame=i[0],this.endFrame=i[1],w.isNumber(s.delay)&&(this.delay=s.delay),w.isNumber(s.repeats)&&(this.repeats=s.repeats),w.isBoolean(s.infinite)&&(this.infinite=s.infinite),w.isBoolean(s.alternate)&&(this.alternate=s.alternate),w.isNumber(s.wait)&&(this.wait=s.wait),w.isNumber(s.delay)&&(this.delay=s.delay),this.replay()))}},{key:"pause",value:function(){return this._cancelImageLoadHandle&&this._cancelImageLoadHandle(),this._paused=!0,this}},{key:"resume",value:function(){return this._cancelImageLoadHandle&&this._cancelImageLoadHandle(),this._paused=!1,this}},{key:"replay",value:function(){return this._cancelImageLoadHandle&&this._cancelImageLoadHandle(),this._paused=!1,this._repeatsCut=this.repeats,this._delayCut=this.delay,this.living=!0,this.frameNum=0,this.duration=Math.floor(this.endFrame-this.beginFrame),this.direction=1,this}}]),_}(),ti=function(){u(s,m);var i=v(s);function s(t){var e;return x(this,s),(e=i.call(this)).pt=0,e.snippet=0,e.timeScale=1,e.paused=!1,e.ticker=t.ticker?t.ticker:t,e.groups=[],e.update=e.update.bind(d(e)),e.ticker&&e.start(),e}return l(s,[{key:"add",value:function(t){var e=arguments.length;if(1<e)for(var i=0;i<e;i++)this.add(arguments[i]);else this.groups.push(t);return t}},{key:"parseAnimation",value:function(t){var e=new Qe(t);return this.add(e)}},{key:"setSpeed",value:function(t){this.timeScale=t}},{key:"start",value:function(){return this.pt=Date.now(),this.ticker.on("update",this.update),this}},{key:"stop",value:function(){return this.ticker.off("update",this.update),this}},{key:"pause",value:function(){return this.paused=!0,this}},{key:"resume",value:function(){return this.paused=!1,this}},{key:"update",value:function(){if(this.timeline(),!this.paused){for(var t=this.timeScale*this.snippet,e=this.groups.length,i=0;i<e;i++){this.groups[i].update(t)}this.emit("update",this.snippet)}}},{key:"timeline",value:function(){var t=Date.now()-this.pt;(!this.pt||200<t)&&(this.pt=Date.now(),t=Date.now()-this.pt),this.pt+=t,this.snippet=t}}]),s}(),ei={Linear:{None:function(t){return t}},Ease:{In:(Ne=new j(.42,0,1,1),function(t){return Ne.get(t)}),Out:(Be=new j(0,0,.58,1),function(t){return Be.get(t)}),InOut:(Ve=new j(.42,0,.58,1),function(t){return Ve.get(t)}),Bezier:function(t,e,i,s){var n=new j(t,e,i,s);return function(t){return n.get(t)}}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-ei.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*ei.Bounce.In(2*t):.5*ei.Bounce.Out(2*t-1)+.5}}},ii={DTR:function(t){return t*Math.PI/180},RTD:function(t){return 180*t/Math.PI},random:function(t,e){return this.isArray(t)?t[~~(Math.random()*t.length)]:(this.isNumber(e)||(e=t||1,t=0),t+Math.random()*(e-t))},linear:function(t,e,i){return t<=e?0:i<=t?1:t=(t-e)/(i-e)},smoothstep:function(t,e,i){return(t=this.linear(t,e,i))*t*(3-2*t)},smootherstep:function(t,e,i){return(t=this.linear(t,e,i))*t*t*(t*(6*t-15)+10)}};function si(t){m.call(this),this.element=t.element||{},this.duration=t.duration||300,this.living=!0,this.resident=t.resident||!1,this.infinite=t.infinite||!1,this.alternate=t.alternate||!1,this.repeats=t.repeats||0,this.delay=t.delay||0,this.wait=t.wait||0,this.timeScale=ii.isNumber(t.timeScale)?t.timeScale:1,t.onComplete&&this.on("complete",t.onComplete.bind(this)),t.onUpdate&&this.on("update",t.onUpdate.bind(this)),this.init(),this.paused=!1}function ni(t){for(var e in si.call(this,t),t.from=t.from||{},t.to)ii.isUndefined(t.from[e])&&(t.from[e]=this.element[e]);this.ease=t.ease||ei.Ease.InOut,this.from=t.from,this.to=t.to}function ri(){}function oi(t,e,i,s){this.x=t||0,this.y=e||0,this.z=i||0,this.w=s||0}function ai(t){si.call(this,t),t.path&&t.path instanceof ri||console.warn("path is not instanceof Curve"),this.path=t.path,this.ease=t.ease||ei.Ease.InOut,this.lengthMode=!!ii.isBoolean(t.lengthMode)&&t.lengthMode,this.attachTangent=!!ii.isBoolean(t.attachTangent)&&t.attachTangent,this._cacheRotate=this.element.rotation;var e=this._cacheRotate;this._cacheVector=new oi(10*Math.cos(e),10*Math.sin(e))}function hi(t){si.call(this,t),this.dynamicProperties=[],this._mdf=!1,this.keyframes=w.copyJSON(t.keyframes),this.frameRate=t.frameRate||30,this.tpf=1e3/this.frameRate,this.ip=w.isUndefined(t.ip)?this.keyframes.ip:t.ip,this.op=w.isUndefined(t.ip)?this.keyframes.op:t.op,this.tfs=this.op-this.ip,this.duration=this.tfs*this.tpf,this.ignoreProps=w.isArray(t.ignoreProps)?t.ignoreProps:[],this.transform=new Ue(this,this.keyframes.ks)}function pi(t,e){si.call(this,e),this.runners=[],this.queues=[],this.cursor=0,this.total=0,this.alternate=!1,t&&this.then(t)}function li(t){this.element=t,this.animates=[],this.timeScale=1,this.paused=!1}Object.assign(ii,w),(si.prototype=Object.create(m.prototype)).update=function(t){var e=this.direction*this.timeScale*t;if(0<this.waitCut)this.waitCut-=Math.abs(e);else{if(!(this.paused||!this.living||0<this.delayCut)){this.progress+=e;var i,s=!1,n=this.progress;return this.spill()&&(0<this.repeatsCut||this.infinite?(0<this.repeatsCut&&--this.repeatsCut,this.delayCut=this.delay,this.alternate?(this.direction*=-1,this.progress=ii.codomainBounce(this.progress,0,this.duration)):(this.direction=1,this.progress=ii.euclideanModulo(this.progress,this.duration))):s=!0),s?(this.resident||(this.living=!1),this.progress=ii.clamp(n,0,this.duration),i=this.nextPose(),this.emit("complete",i,Math.abs(n-this.progress))):(i=this.nextPose(),this.emit("update",i,this.progress/this.duration)),i}0<this.delayCut&&(this.delayCut-=Math.abs(e))}},si.prototype.spill=function(){var t=this.progress<=0&&-1===this.direction,e=this.progress>=this.duration&&1===this.direction;return t||e},si.prototype.init=function(){this.direction=1,this.progress=0,this.repeatsCut=this.repeats,this.delayCut=this.delay,this.waitCut=this.wait},si.prototype.nextPose=function(){console.warn("should be overwrite")},si.prototype.linear=function(t,e,i){return(e-t)*i+t},si.prototype.pause=function(){this.paused=!0},si.prototype.restart=function(){this.paused=!1},si.prototype.stop=function(){this.repeats=0,this.infinite=!1,this.progress=this.duration},si.prototype.setSpeed=function(t){this.timeScale=t},si.prototype.cancle=function(){this.living=!1},(ni.prototype=Object.create(si.prototype)).nextPose=function(){var t={},e=this.ease(this.progress/this.duration);for(var i in this.to)t[i]=this.linear(this.from[i],this.to[i],e),void 0!==this.element[i]&&(this.element[i]=t[i]);return t},ri.prototype={constructor:ri,getPoint:function(t){return console.warn("Curve: Warning, getPoint() not implemented!",t),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,s=[],n=this.getPoint(0),r=0;for(s.push(0),i=1;i<=t;i++)r+=(e=this.getPoint(i/t)).distanceTo(n),s.push(r),n=e;return this.cacheArcLengths=s},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var i,s=this.getLengths(),n=0,r=s.length,o=e||t*s[r-1],a=0,h=r-1;a<=h;)if((i=s[n=Math.floor(a+(h-a)/2)]-o)<0)a=n+1;else{if(!(0<i)){h=n;break}h=n-1}if(s[n=h]===o)return n/(r-1);var p=s[n];return(n+(o-p)/(s[n+1]-p))/(r-1)},getTangent:function(t){var e=t-1e-4,i=t+1e-4,s=this.getPoint(e);return this.getPoint(i).clone().sub(s).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},oi.prototype.clone=function(){return new oi(this.x,this.y,this.z,this.w)},oi.prototype.copy=function(t){this.set(t.x,t.y,t.z,t.w)},oi.prototype.set=function(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this},oi.prototype.add=function(t,e){return void 0!==e?(console.warn("Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},oi.prototype.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},oi.prototype.sub=function(t,e){return void 0!==e?(console.warn("Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},oi.prototype.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},oi.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},oi.prototype.length=function(){return Math.sqrt(this.lengthSq())},oi.prototype.normalize=function(){return this.divideScalar(this.length())},oi.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},oi.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},oi.prototype.distanceToSquared=function(t){var e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s},oi.prototype.multiplyScalar=function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},oi.prototype.cross=function(t,e){if(void 0!==e)return console.warn("Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var i=this.x,s=this.y,n=this.z;return this.x=s*t.z-n*t.y,this.y=n*t.x-i*t.z,this.z=i*t.y-s*t.x,this},oi.prototype.crossVectors=function(t,e){var i=t.x,s=t.y,n=t.z,r=e.x,o=e.y,a=e.z;return this.x=s*a-n*o,this.y=n*r-i*a,this.z=i*o-s*r,this},(ai.prototype=Object.create(si.prototype)).nextPose=function(){var t,e=this.ease(this.progress/this.duration),i=(this.lengthMode?this.path.getPointAt(e):this.path.getPoint(e)).clone();return this.attachTangent&&(t=this.decomposeRotate(e),i.rotation=!1===t?this.preDegree:t,i.rotation+=this._cacheRotate,!1!==t&&(this.preDegree=t)),this.element.setProps(i),i},ai.prototype.decomposeRotate=function(t){var e=this.lengthMode?this.path.getTangentAt(t):this.path.getTangent(t),i=0<this._cacheVector.x*e.y-e.x*this._cacheVector.y?1:-1,s=(e.x*this._cacheVector.x+e.y*this._cacheVector.y)/(Math.sqrt(e.x*e.x+e.y*e.y)*Math.sqrt(this._cacheVector.x*this._cacheVector.x+this._cacheVector.y*this._cacheVector.y));return!isNaN(s)&&i*Math.acos(s)*ii.RTD},(hi.prototype=Object.create(si.prototype)).prepareProperties=function(t){for(var e=this.dynamicProperties.length,i=0;i<e;i+=1)this.dynamicProperties[i].getValue(t),this.dynamicProperties[i]._mdf&&(this._mdf=!0)},hi.prototype.addDynamicProperty=function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)},hi.prototype.nextPose=function(){var t={},e=this.ip+this.progress/this.tpf;return this.prepareProperties(e),-1===this.ignoreProps.indexOf("position")&&(-1===this.ignoreProps.indexOf("x")&&(t.x=this.element.x=this.transform.x),-1===this.ignoreProps.indexOf("y")&&(t.y=this.element.y=this.transform.y)),-1===this.ignoreProps.indexOf("pivot")&&(-1===this.ignoreProps.indexOf("pivotX")&&(t.pivotX=this.element.pivotX=this.transform.anchorX),-1===this.ignoreProps.indexOf("pivotY")&&(t.pivotY=this.element.pivotY=this.transform.anchorY)),-1===this.ignoreProps.indexOf("scale")&&(-1===this.ignoreProps.indexOf("scaleX")&&(t.scaleX=this.element.scaleX=this.transform.scaleX),-1===this.ignoreProps.indexOf("scaleY")&&(t.scaleY=this.element.scaleY=this.transform.scaleY)),-1===this.ignoreProps.indexOf("rotation")&&(t.rotation=this.element.rotation=this.transform.rotation),-1===this.ignoreProps.indexOf("alpha")&&(t.alpha=this.element.alpha=this.transform.alpha),t},(pi.prototype=Object.create(si.prototype)).then=function(t){return this.queues.push(t),this.total=this.queues.length,this},pi.prototype.nextOne=function(t,e){this.runners[this.cursor].init(),this.cursor++,this.timeSnippet=e},pi.prototype.initOne=function(){var t=this.queues[this.cursor];t.infinite=!1,t.resident=!0,t.element=this.element;var e=null;t.path?e=new ai(t):t.to&&(e=new ni(t)),null!==e&&(e.on("complete",this.nextOne.bind(this)),this.runners.push(e))},pi.prototype.nextPose=function(t){return!this.runners[this.cursor]&&this.queues[this.cursor]&&this.initOne(),0<this.timeSnippet&&(t+=this.timeSnippet,this.timeSnippet=0),this.runners[this.cursor].update(t)},pi.prototype.update=function(t){if(0<this.wait)this.wait-=Math.abs(t);else{if(!(this.paused||!this.living||0<this.delayCut)){var e=this.cursor,i=this.nextPose(this.timeScale*t);return this.emit("update",{index:e,pose:i},this.progress/this.duration),this.spill()&&(0<this.repeats||this.infinite?(0<this.repeats&&--this.repeats,this.delayCut=this.delay,this.cursor=0):(this.resident||(this.living=!1),this.emit("complete",i))),i}0<this.delayCut&&(this.delayCut-=Math.abs(t))}},pi.prototype.spill=function(){return this.cursor>=this.total},li.prototype.update=function(t){if(!this.paused){t=this.timeScale*t;for(var e=this.animates.slice(0),i=0;i<e.length;i++)e[i].living||e[i].resident||this.animates.splice(i,1),e[i].update(t)}},li.prototype.animate=function(t,e){return t.element=this.element,this._addMove(new ni(t),e)},li.prototype.motion=function(t,e){return t.element=this.element,this._addMove(new ai(t),e)},li.prototype.queues=function(t,e,i){return e.element=this.element,this._addMove(new pi(t,e),i)},li.prototype.bodymovin=function(t,e){return t.element=this.element,this._addMove(new hi(t),e)},li.prototype._addMove=function(t,e){return e&&this.clear(),this.animates.push(t),t},li.prototype.pause=function(){this.paused=!0},li.prototype.restart=function(){this.paused=!1},li.prototype.setSpeed=function(t){this.timeScale=t},li.prototype.clear=function(){this.animates.length=0};function ui(t,e){if(m.call(this),e=e||{},this.type="",this.url="",this.texture=null,this.crossOrigin=e.crossOrigin,this.loaded=!1,this.hadload=!1,this.lazy=e.lazy||!1,ii.isString(t))this.type="url",this.url=t,this.texture=this.resole(),this.texture.crossOrigin=this.crossOrigin,this.lazy||this.load();else{if("VIDEO"!==(i=t).tagName&&"CANVAS"!==i.tagName&&"IMG"!==i.tagName)return void console.warn("texture not support this texture");this.type="img",this.loaded=!0,this.hadload=!0,this.texture=t}var i;this.listen()}function ci(t){m.call(this),this.crossOrigin=t,this.textures={},this._total=0,this._failed=0,this._received=0}(ui.prototype=Object.create(m.prototype)).resole=function(){return new Image},ui.prototype.load=function(t){this.hadload||"url"!==this.type||(t=t||this.url,this.hadload=!0,this.texture.src=t)},ui.prototype.listen=function(){var t=this;this.texture.addEventListener("load",function(){t.loaded=!0,t.emit("load")}),this.texture.addEventListener("error",function(){t.emit("error")})},Object.defineProperty(ui.prototype,"width",{get:function(){return this.texture?this.texture.width:0}}),Object.defineProperty(ui.prototype,"height",{get:function(){return this.texture?this.texture.height:0}}),Object.defineProperty(ui.prototype,"naturalWidth",{get:function(){return this.texture?this.texture.naturalWidth||this.texture.width:0}}),Object.defineProperty(ui.prototype,"naturalHeight",{get:function(){return this.texture?this.texture.naturalHeight||this.texture.height:0}}),(ci.prototype=Object.create(m.prototype)).load=function(t){var e,i=this;for(var s in this._total=0,this._failed=0,this._received=0,t)this._total++,this.textures[s]=new ui(t[s],{crossOrigin:this.crossOrigin}),(e=this.textures[s]).on("load",function(){i._received++,i.emit("update"),i._received+i._failed>=i._total&&i.emit("complete")}),e.on("error",function(){i._failed++,i.emit("update"),i._received+i._failed>=i._total&&i.emit("complete")});return this},ci.prototype.getById=function(t){return this.textures[t]},Object.defineProperty(ci.prototype,"progress",{get:function(){return 0===this._total?1:(this._received+this._failed)/this._total}});function fi(t,e){var i=e.prefix,s=e.autoLoad,n=void 0===s||s,r=e.crossOrigin,o=void 0===r?"*":r;m.call(this),this.assets=t,this.prefix=i||"",this.crossOrigin=o,this.textures={},this._total=0,this._failed=0,this._received=0,n&&this._load()}function di(t){m.call(this),this.enableFPS=!ii.isBoolean(t)||t,this.pt=0,this.snippet=0,this.averageSnippet=0,this.fps=0,this.averageFps=0,this._takeTime=0,this._renderTimes=0,this.started=!1,this.paused=!1}function vi(t,e,i,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0}function mi(t,e,i,s){this.minX=ii.isNumber(t)?t:1/0,this.minY=ii.isNumber(e)?e:1/0,this.maxX=ii.isNumber(i)?i:-1/0,this.maxY=ii.isNumber(s)?s:-1/0}function yi(t){if(!ii.isArray(t)){t=new Array(arguments.length);for(var e=0;e<t.length;++e)t[e]=arguments[e]}if(t[0]instanceof oi){for(var i=[],s=0,n=t.length;s<n;s++)i.push(t[s].x,t[s].y);t=i}this.closed=!0,this.points=t}function gi(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0}function ki(t,e,i,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0}function _i(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}(fi.prototype=Object.create(m.prototype)).load=function(){this._load()},fi.prototype._load=function(){var s=this;this.assets.forEach(function(t){var e=t.id,i=new ui(function(t,e){e=e&&e.replace(/\/?$/,"/");var i=t.u+t.p;return t.up||e+i}(t,s.prefix),{crossOrigin:s.crossOrigin});(s.textures[e]=i).loaded?(s._received++,s.emit("update"),s._received+s._failed>=s._total&&s.emit("complete")):(i.once("load",function(){s._received++,s.emit("update"),s._received+s._failed>=s._total&&s.emit("complete")}),i.once("error",function(){s._failed++,s.emit("update"),s._received+s._failed>=s._total&&s.emit("complete")}))})},fi.prototype.getTextureById=function(t){return this.textures[t]},(di.prototype=Object.create(m.prototype)).timeline=function(){this.snippet=Date.now()-this.pt,(0===this.pt||200<this.snippet)&&(this.pt=Date.now(),this.snippet=Date.now()-this.pt),this.enableFPS&&(this._renderTimes++,this._takeTime+=Math.max(15,this.snippet),this.fps=1e3/Math.max(15,this.snippet)>>0,this.averageFps=1e3/(this._takeTime/this._renderTimes)>>0),this.pt+=this.snippet},di.prototype.tick=function(){this.paused||(this.emit("pretimeline"),this.timeline(),this.emit("posttimeline",this.snippet),this.emit("update",this.snippet),this.emit("tick",this.snippet))},di.prototype.start=function(){var e=this;this.started||(this.started=!0,function t(){e.tick(),e.loop=RAF(t)}())},di.prototype.stop=function(){CAF(this.loop),this.started=!1},di.prototype.pause=function(){this.paused=!0},di.prototype.resume=function(){this.paused=!1},vi.EMPTY=new vi(0,0,0,0),vi.prototype.clone=function(){return new vi(this.x,this.y,this.width,this.height)},vi.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},mi.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},mi.prototype.clear=function(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this},mi.prototype.getRectangle=function(t){return this.isEmpty()?vi.EMPTY:((t=t||new vi(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},mi.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},mi.prototype.addRect=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.width+t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.height+t.y)},mi.prototype.addCircle=function(t){this.minX=Math.min(this.minX,t.x-t.radius),this.maxX=Math.max(this.maxX,t.x+t.radius),this.minY=Math.min(this.minY,t.y-t.radius),this.maxY=Math.max(this.maxY,t.y+t.radius)},mi.prototype.addVert=function(t){for(var e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,r=0;r<t.length;r+=2)var o=t[r],a=t[r+1],e=o<e?o:e,i=a<i?a:i,s=s<o?o:s,n=n<a?a:n;this.minX=e,this.minY=i,this.maxX=s,this.maxY=n},mi.prototype.addBounds=function(t){var e=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n},yi.prototype.clone=function(){return new yi(this.points.slice())},yi.prototype.contains=function(t,e){for(var i=!1,s=this.points.length/2,n=0,r=s-1;n<s;r=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*r],p=this.points[2*r+1];e<a!=e<p&&t<(h-o)*(e-a)/(p-a)+o&&(i=!i)}return i},gi.prototype.clone=function(){return new gi(this.x,this.y,this.radius)},gi.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,s=this.y-e;return(i*=i)+(s*=s)<=this.radius*this.radius},gi.prototype.getBounds=function(){return new vi(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},ki.prototype.clone=function(){return new ki(this.x,this.y,this.width,this.height)},ki.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,s=(e-this.y)/this.height;return(i*=i)+(s*=s)<=1},ki.prototype.getBounds=function(){return new vi(this.x-this.width,this.y-this.height,this.width,this.height)},_i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[2],this.d=t[3],this.tx=t[4],this.ty=t[5]},_i.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},_i.prototype.apply=function(t,e){return(e=e||{}).x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},_i.prototype.applyInverse=function(t,e){e=e||{};var i=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*i*t.x+-this.c*i*t.y+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t.y+-this.b*i*t.x+(-this.ty*this.a+this.tx*this.b)*i,e},_i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},_i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},_i.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,r=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this},_i.prototype.append=function(t){var e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},_i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},_i.prototype.setTransform=function(t,e,i,s,n,r,o,a,h,p,l){var u=Math.sin(o),c=Math.cos(o),f=Math.tan(h),d=Math.tan(a),v=c*n,m=u*n,y=-u*r,g=c*r,k=i+p,_=s+l;return this.a=v+f*y,this.b=m+f*g,this.c=d*v+y,this.d=d*m+g,this.tx=t-k*this.a-_*this.c+p,this.ty=e-k*this.b-_*this.d+l,this};var xi=new _i,wi=new _i;function Pi(t){this.points=t,this.passCmp={x:!0,y:!0,z:!1},this.ccmp={},this.updateCcmp()}function Mi(t){this.points=t}function Ti(t){ii.isString(t)?this.path=this.createPath(t):"path"===t.nodeName&&t.getAttribute("d")?this.path=t:console.warn('path just accept <path d="M10 10"> element or "M10 10" string but found '+t),this.totalLength=this.path.getTotalLength()}(Pi.prototype=Object.create(ri.prototype)).updateCcmp=function(){for(var t=0;t<this.points.length;t++){var e=this.points[t];for(var i in this.passCmp)this.passCmp[i]&&!ii.isUndefined(e[i])&&(this.ccmp[i]=this.ccmp[i]||[],this.ccmp[i][t]=e[i])}},Pi.prototype.getPoint=function(t){var e=new oi;for(var i in this.passCmp)this.passCmp[i]&&(e[i]=this.solveEachCmp(this.ccmp[i],t));return e},Pi.prototype.solveEachCmp=function(t,e){var i=t.length-1,s=i*e,n=Math.floor(s),r=this.solve;return t[0]===t[i]?(e<0&&(n=Math.floor(s=i*(1+e))),r(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],s-n)):e<0?t[0]-(r(t[0],t[0],t[1],t[1],-s)-t[0]):1<e?t[i]-(r(t[i],t[i],t[i-1],t[i-1],s-i)-t[i]):r(t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2],s-n)},Pi.prototype.solve=function(t,e,i,s,n){var r=.5*(i-t),o=.5*(s-e),a=n*n;return(2*e-2*i+r+o)*(n*a)+(-3*e+3*i-2*r-o)*a+r*n+e},(Mi.prototype=Object.create(ri.prototype)).getPoint=function(t,e){var i=e||this.points,s=i.length,n=1-t,r=i.slice(0,s-1),o=i.slice(1),a=new oi;if(3<s){var h=this.getPoint(t,r),p=this.getPoint(t,o);return a.x=n*h.x+t*p.x,a.y=n*h.y+t*p.y,a}return a.x=n*n*i[0].x+2*t*n*i[1].x+t*t*i[2].x,a.y=n*n*i[0].y+2*t*n*i[1].y+t*t*i[2].y,a},(Ti.prototype=Object.create(ri.prototype)).createPath=function(t){return document.createElementNS("http://www.w3.org/2000/svg","path").setAttribute(t)},Ti.prototype.getPoint=function(t){var e=this.path.getPointAtLength(t*this.totalLength);return new oi(e.x,e.y)};var bi={findSpan:function(t,e,i){var s=i.length-t-1;if(e>=i[s])return s-1;if(e<=i[t])return t;for(var n=t,r=s,o=Math.floor((n+r)/2);e<i[o]||e>=i[o+1];)e<i[o]?r=o:n=o,o=Math.floor((n+r)/2);return o},calcBasisFunctions:function(t,e,i,s){for(var n=[],r=[],o=[],a=n[0]=1;a<=i;++a){r[a]=e-s[t+1-a],o[a]=s[t+a]-e;for(var h=0,p=0;p<a;++p){var l=o[p+1],u=r[a-p],c=n[p]/(l+u);n[p]=h+l*c,h=u*c}n[a]=h}return n},calcBSplinePoint:function(t,e,i,s){for(var n=this.findSpan(t,s,e),r=this.calcBasisFunctions(n,s,t,e),o=new oi(0,0,0,0),a=0;a<=t;++a){var h=i[n-t+a],p=r[a],l=h.w*p;o.x+=h.x*l,o.y+=h.y*l,o.z+=h.z*l,o.w+=h.w*p}return o},calcBasisFunctionDerivatives:function(t,e,i,s,n){var r=[],o=0;for(o=0;o<=i;++o)r[o]=0;var a=[];for(o=0;o<=s;++o)a[o]=r.slice(0);var h=[];for(o=0;o<=i;++o)h[o]=r.slice(0);h[0][0]=1;var p=r.slice(0),l=r.slice(0),u=1,c=0,f=1;for(u=1;u<=i;++u){p[u]=e-n[t+1-u],l[u]=n[t+u]-e;for(var d=0,c=0;c<u;++c){var v=l[c+1],m=p[u-c];h[u][c]=v+m;var y=h[c][u-1]/h[u][c];h[c][u]=d+v*y,d=m*y}h[u][u]=d}for(u=0;u<=i;++u)a[0][u]=h[u][i];for(c=0;c<=i;++c){for(var g=0,k=1,_=[],o=0;o<=i;++o)_[o]=r.slice(0);for(f=_[0][0]=1;f<=s;++f){var x=0,w=c-f,P=i-f;f<=c&&(_[k][0]=_[g][0]/h[1+P][w],x=_[k][0]*h[w][P]);for(var M=c-1<=P?f-1:i-c,u=-1<=w?1:-w;u<=M;++u)_[k][u]=(_[g][u]-_[g][u-1])/h[1+P][w+u],x+=_[k][u]*h[w+u][P];c<=P&&(_[k][f]=-_[g][f-1]/h[1+P][c],x+=_[k][f]*h[c][P]),a[f][c]=x,u=g,g=k,k=u}}for(c=i,f=1;f<=s;++f){for(u=0;u<=i;++u)a[f][u]*=c;c*=i-f}return a},calcBSplineDerivatives:function(t,e,i,s,n){for(var r,o=n<t?n:t,a=[],h=this.findSpan(t,s,e),p=this.calcBasisFunctionDerivatives(h,s,t,o,e),l=[],u=0,c=0;u<i.length;++u){var f=(r=i[u].clone()).w;r.x*=f,r.y*=f,r.z*=f,l[u]=r}for(;c<=o;++c){r=l[h-t].clone().multiplyScalar(p[c][0]);for(var d=1;d<=t;++d)r.add(l[h-t+d].clone().multiplyScalar(p[c][d]));a[c]=r}for(c=o+1;c<=n+1;++c)a[c]=new oi(0,0,0);return a},calcKoverI:function(t,e){for(var i=1,s=2,s=2;s<=t;++s)i*=s;var n=1;for(s=2;s<=e;++s)n*=s;for(s=2;s<=t-e;++s)n*=s;return i/n},calcRationalCurveDerivatives:function(t){var e=t.length,i=[],s=[],n=0;for(n=0;n<e;++n){var r=t[n];i[n]=new oi(r.x,r.y,r.z),s[n]=r.w}for(var o=[],a=0;a<e;++a){for(var h=i[a].clone(),n=1;n<=a;++n)h.sub(o[a-n].clone().multiplyScalar(this.calcKoverI(a,n)*s[n]));o[a]=h.divideScalar(s[0])}return o},calcNURBSDerivatives:function(t,e,i,s,n){var r=this.calcBSplineDerivatives(t,e,i,s,n);return this.calcRationalCurveDerivatives(r)},calcSurfacePoint:function(t,e,i,s,n,r,o){for(var a=this.findSpan(t,r,i),h=this.findSpan(e,o,s),p=this.calcBasisFunctions(a,r,t,i),l=this.calcBasisFunctions(h,o,e,s),u=[],c=0;c<=e;++c){u[c]=new oi(0,0,0,0);for(var f=0;f<=t;++f){var d=n[a-t+f][h-e+c].clone(),v=d.w;d.x*=v,d.y*=v,d.z*=v,u[c].add(d.multiplyScalar(p[f]))}}for(var m=new oi(0,0,0,0),c=0;c<=e;++c)m.add(u[c].multiplyScalar(l[c]));return m.divideScalar(m.w),new oi(m.x,m.y,m.z)}};function Si(t,e,i){this.degree=t,this.knots=e,this.controlPoints=i}function Di(){m.call(this),this.visible=!0,this.worldAlpha=1,this.alpha=1,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.rotation=0,this.rotationCache=0,this._sr=0,this._cr=1,this.x=0,this.y=0,this.pivotX=0,this.pivotY=0,this.originX=0,this.originY=0,this.mask=null,this.parent=null,this.worldTransform=new _i,this.passEvent=!1,this.eventArea=null,this.animation=new li(this),this.cursor="",this.interactive=!1,this.interactiveChildren=!0}function Ei(){Di.call(this),this.childs=[],this.timeScale=1,this.paused=!1,this._zIndex=0,this.souldSort=!1,this.bounds=new mi,this._bounds=new mi,this.vertexData=new Float32Array(8)}function Oi(t,e){m.call(this),this.element=t,this.living=!1,this.infinite=!1,this.alternate=!1,this.repeats=0,this.animations=e.animations||{},this.index=0,this.preIndex=-1,this.direction=1,this.frames=[],this.preFrame=null,this.fillMode=0,this.fps=16,this.paused=!1,this.pt=0,this.nt=0}function Ci(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ei.call(this),this._width=0,this._height=0,this.ready=!1,this.upTexture(t),this.movieClip=new Oi(this,t)}function Ai(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}((Si.prototype=Object.create(ri.prototype)).constructor=Si).prototype.getPoint=function(t){var e=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),i=bi.calcBSplinePoint(this.degree,this.knots,this.controlPoints,e);return 1!==i.w&&i.divideScalar(i.w),new oi(i.x,i.y,i.z)},Si.prototype.getTangent=function(t){var e=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),i=bi.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,e,1)[1].clone();return i.normalize(),i},Di.prototype=Object.create(m.prototype),Object.defineProperty(Di.prototype,"scale",{get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t}}),Object.defineProperty(Di.prototype,"trackedPointers",{get:function(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers}}),Di.prototype.animate=function(t,e){return this.animation.animate(t,e)},Di.prototype.motion=function(t,e){return this.animation.motion(t,e)},Di.prototype.keyFrames=function(t,e){return this.animation.keyFrames(t,e)},Di.prototype.bodymovin=function(t,e){return this.animation.bodymovin(t,e)},Di.prototype.runners=function(t,e){return this.animation.runners(t,e)},Di.prototype.queues=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;return this.animation.queues(t,e,i)},Di.prototype.isVisible=function(){return!!(this.visible&&0<this.alpha&&this.scaleX*this.scaleY!=0)},Di.prototype.removeMask=function(){this.mask=null},Di.prototype.setProps=function(t){if(void 0!==t)for(var e in t)void 0!==this[e]&&(this[e]=t[e])},Di.prototype.updateTransform=function(t){var e,i,s,n,r,o,a=t||this.hierarchy&&this.hierarchy.worldTransform||this.parent&&this.parent.worldTransform||xi,h=this.worldTransform,p=this.parent&&this.parent.worldAlpha||1,l=this.pivotX+this.originX,u=this.pivotY+this.originY;this.skewX||this.skewY?(wi.setTransform(this.x,this.y,this.pivotX,this.pivotY,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.originX,this.originY),h.a=wi.a*a.a+wi.b*a.c,h.b=wi.a*a.b+wi.b*a.d,h.c=wi.c*a.a+wi.d*a.c,h.d=wi.c*a.b+wi.d*a.d,h.tx=wi.tx*a.a+wi.ty*a.c+a.tx,h.ty=wi.tx*a.b+wi.ty*a.d+a.ty):(this.rotation%360?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scaleX,i=this._sr*this.scaleX,s=-this._sr*this.scaleY,n=this._cr*this.scaleY,r=this.x,o=this.y,(this.pivotX||this.pivotY||this.originX||this.originY)&&(r-=l*e+u*s-this.originX,o-=l*i+u*n-this.originY),h.a=e*a.a+i*a.c,h.b=e*a.b+i*a.d,h.c=s*a.a+n*a.c,h.d=s*a.b+n*a.d):(e=this.scaleX,n=this.scaleY,r=this.x-l*e+this.originX,o=this.y-u*n+this.originY,h.a=e*a.a,h.b=e*a.b,h.c=n*a.c,h.d=n*a.d),h.tx=r*a.a+o*a.c+a.tx,h.ty=r*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*p},Di.prototype.updateAnimation=function(t){this.animation.update(t)},Di.prototype.setTransform=function(t){var e=this.worldTransform;t.globalAlpha=this.worldAlpha,t.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty)},Di.prototype.getGlobalPos=function(){return{x:this.worldTransform.tx,y:this.worldTransform.ty}},Di.prototype.setArea=function(t,e){null!==this.eventArea&&this.eventArea.clocked&&!e||(this.eventArea=t,e&&(this.eventArea.clocked=!0))},Di.prototype.contains=function(t){if(null===this.eventArea)return!1;var e=new oi;return this.worldTransform.applyInverse(t,e),this.eventArea&&this.eventArea.contains(e.x,e.y)},Ei.prototype=Object.create(Di.prototype),Object.defineProperty(Ei.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.souldSort=!0))}}),Ei.prototype._sortList=function(){for(var t,e,i=this.childs,s=i.length,n=0;n<s-1;n++)for(t=0;t<s-1-n;t++)i[t].zIndex>i[t+1].zIndex&&(e=i[t],i[t]=i[t+1],i[t+1]=e);this.souldSort=!1},Ei.prototype.updateMovin=function(t,e){for(var i=this.childs.length,s=0;s<i;s++){var n=this.childs[s];n&&!n._aniRoot&&n.updateMovin&&n.updateMovin(t,e)}this.updateKeyframes&&this.updateKeyframes(t,e)},Ei.prototype.adds=function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.adds(arguments[e]);return this}return t===this&&console.error("adds: object can't be added as a child of itself.",t),t&&t instanceof Ei?(null!==t.parent&&t.parent.remove(t),(t.parent=this).childs.push(t),this.souldSort=!0):console.error("adds: object not an instance of Container",t),this},Ei.prototype.remove=function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.childs.indexOf(t);-1!==i&&(t.parent=null,this.childs.splice(i,1))},Ei.prototype.updateTimeline=function(t){if(this.emit("pretimeline",t),!this.paused){t=this.timeScale*t,this.updateAnimation(t);for(var e=0,i=this.childs.length;e<i;){this.childs[e].updateTimeline(t),e++}this.emit("posttimeline",t)}},Ei.prototype.updatePosture=function(){this.emit("preposture"),this.souldSort&&this._sortList(),this.updateTransform();for(var t=0,e=this.childs.length;t<e;){this.childs[t].updatePosture(),t++}this.emit("postposture")},Ei.prototype.render=function(t){this.emit("prerender"),t.save(),this.setTransform(t),this.mask&&this.mask.render(t),this.renderMe(t);for(var e=0,i=this.childs.length;e<i;){var s=this.childs[e];e++,s.isVisible()&&s.render(t)}t.restore(),this.emit("postrender")},Ei.prototype.renderMe=function(){return!0},Ei.prototype.calculateVertices=function(){var t=this.worldTransform,e=t.a,i=t.b,s=t.c,n=t.d,r=t.tx,o=t.ty,a=this.vertexData,h=this._bounds.minX,p=this._bounds.maxX,l=this._bounds.minY,u=this._bounds.maxY;a[0]=e*p+s*u+r,a[1]=n*u+i*p+o,a[2]=e*h+s*u+r,a[3]=n*u+i*h+o,a[4]=e*h+s*l+r,a[5]=n*l+i*h+o,a[6]=e*p+s*l+r,a[7]=n*l+i*p+o},Ei.prototype.calculateBounds=function(){if(this.bounds.clear(),this.visible){this._calculateBounds();for(var t=0;t<this.childs.length;t++){var e=this.childs[t];e.calculateBounds(),this.bounds.addBounds(e.bounds)}}},Ei.prototype._calculateBounds=function(){this.calculateVertices(),this.bounds.addVert(this.vertexData)},Ei.prototype.setBounds=function(t){t instanceof mi&&(this._bounds=t)},Ei.prototype.pause=function(){this.paused=!0},Ei.prototype.restart=function(){this.paused=!1},Ei.prototype.setSpeed=function(t){this.timeScale=t},(Oi.prototype=Object.create(m.prototype)).update=function(t){var e;!this.paused&&this.living&&(this.nt+=t,this.nt-this.pt<this.interval||(this.pt=this.nt,(e=this.index+this.direction)<this.frames.length&&0<=e?this.index=e:0<this.repeats||this.infinite?(0<this.repeats&&--this.repeats,this.alternate?(this.direction*=-1,this.index+=this.direction):(this.direction=1,this.index=0)):(this.living=!1,this.index=this.fillMode,this.emit("complete"))))},Oi.prototype.getFrame=function(){if(this.index===this.preIndex&&null!==this.preFrame)return this.preFrame;var t,e,i,s,n=this.element.frame.clone(),r=this.frames[this.index];return 0<r&&(t=this.element.naturalWidth/this.element.frame.width>>0,i=((e=this.element.frame.x/this.element.frame.width>>0)+r)/t>>0,s=(e+r)%t,n.x=s*this.element.frame.width,n.y+=i*this.element.frame.height),this.preIndex=this.index,this.preFrame=n},Oi.prototype.playMovie=function(t){this.off("complete");var e,i=this.format(t.movie);if(ii.isArray(i))return this.frames=i,this.index=0,this.direction=1,this.fillMode=t.fillMode||0,this.fps=t.fps||this.fps,this.infinite=t.infinite||!1,this.alternate=t.alternate||!1,this.repeats=t.repeats||0,this.living=!0,t.onComplete&&(e=this).once("complete",function(){t.onComplete.call(e)}),this},Oi.prototype.format=function(t){if(ii.isString(t)){var e=this.animations[t];return e?this.format(e):(console.warn("you havn't config "+t+" in animations "),!1)}if(ii.isArray(t))return t;if(ii.isObject(t)){for(var i,s,n=[],r=t.start;r<=t.end;r++)n.push(r);return t.next&&this.animations[t.next]&&(i=this,s={},ii.isString(t.next)&&this.animations[t.next]?(s.movie=t.next,s.infinite=!0):ii.isObject(t.next)&&(s=t.next),ii.isString(s.movie)&&this.once("complete",function(){i.playMovie(s)})),n}},Oi.prototype.pause=function(){this.paused=!0},Oi.prototype.restart=function(){this.paused=!1},Oi.prototype.cancle=function(){this.living=!1},Object.defineProperty(Oi.prototype,"interval",{get:function(){return 0<this.fps?1e3/this.fps>>0:16}}),(Ci.prototype=Object.create(Ei.prototype)).upTexture=function(t){var e=this;if(t.texture){if(!t.texture.loaded)return this.ready=!1,void t.texture.on("load",function(){e.upTexture(t),e.ready=!0});this.ready=!0,this.texture=t.texture,this.naturalWidth=t.texture.naturalWidth,this.naturalHeight=t.texture.naturalHeight,this.frame=t.frame||new vi(0,0,this.naturalWidth,this.naturalHeight),this.width=t.width||this.frame.width,this.height=t.height||this.frame.height,this.movieClip&&(this.movieClip.preFrame=null)}},Object.defineProperty(Ci.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.updateGeometry())}}),Object.defineProperty(Ci.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.updateGeometry())}}),Ci.prototype.updateGeometry=function(){var t=new vi(0,0,this.width,this.height);this._bounds.clear().addRect(t),this.setArea(t)},Ci.prototype.updateAnimation=function(t){this.animation.update(t),this.movieClip.update(t)},Ci.prototype.playMovie=function(t){return this.movieClip.playMovie(t)},Ci.prototype.renderMe=function(t){var e;this.ready&&(e=this.movieClip.getFrame(),t.drawImage(this.texture.texture,e.x,e.y,e.width,e.height,0,0,this.width,this.height))},Ai.prototype.setSize=function(t){this.width=this.canvas.width=t.width+2*t.px,this.height=this.canvas.height=t.height+2*t.py},Ai.prototype.clear=function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.width,this.height)},Ai.prototype.setTransform=function(t,e,i,s,n,r){this.ctx.setTransform(t,e,i,s,n,r)},Ai.prototype.getBuffer=function(){return this.buffer=this.ctx.getImageData(0,0,this.width,this.height),this.buffer},Ai.prototype.putBuffer=function(){return this.ctx.putImageData(this.buffer,0,0),this.canvas};function Ii(t,e){Ei.call(this),e=e||{},this.mesh=t,this.meshType=ii.isFunction(t)?"fn":ii.isObject(t)&&ii.isFunction(t.render)?"in":"",""===this.meshType&&console.error("不支持的绘制对象"),this.cache=e.cache||!1,this.cached=!1,this.setBounds(e.bounds),this.frameBuffer=null}function Li(t,e){Ei.call(this),this.text=t.toString(),this.fontStyle=e.fontStyle||"normal",this.fontWeight=e.fontWeight||"normal",this.fontSize=e.fontSize||"12px",this.fontFamily=e.fontFamily||"Arial",this.fillColor=e.fillColor||"black",this.strokeColor=e.strokeColor||"red",this.textAlign=e.textAlign||"center",this.textBaseline=e.textBaseline||"middle",this.lineWidth=ii.isNumber(e.lineWidth)?e.lineWidth:1,this.stroke=!!ii.isBoolean(e.stroke)&&e.stroke,this.fill=!ii.isBoolean(e.fill)||e.fill}function Fi(){Ei.call(this),this.frameBuffer=new Ai,this.filters=[],this.needUpdateBuffer=!0,this.autoUpdateBuffer=!1,this.padding={x:0,y:0}}(Ii.prototype=Object.create(Ei.prototype)).renderMe=function(t){this.meshType&&(this.cached||this.cache?(this.cache&&(null===this.frameBuffer&&(this.frameBuffer=new Ai),this.frameBuffer.clear(),this.__co=this._bounds.getRectangle(),this.__co.px=this.__co.py=0,this.frameBuffer.setSize(this.__co),this.frameBuffer.setTransform(1,0,0,1,-this.__co.x,-this.__co.y),this._drawBack(this.frameBuffer.ctx),this.cached=!0,this.cache=!1),this.frameBuffer&&t.drawImage(this.frameBuffer.canvas,this.__co.x-this.__co.px,this.__co.y-this.__co.py,this.frameBuffer.width,this.frameBuffer.height)):this._drawBack(t))},Ii.prototype._drawBack=function(t){"fn"===this.meshType?this.mesh(t):"in"===this.meshType&&this.mesh.render(t)},(Li.prototype=Object.create(Ei.prototype)).renderMe=function(t){t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+" "+this.fontFamily,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,this.fill&&(t.fillStyle=this.fillColor,t.fillText(this.text,0,0)),this.stroke&&(t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeColor,t.strokeText(this.text,0,0))},(Fi.prototype=Object.create(Ei.prototype)).updatePosture=function(){this.souldSort&&this._sortList(),this.updateTransform(),this.needUpdateBuffer||this.autoUpdateBuffer?(this.cacheMatrix=this.worldTransform,this.worldTransform=Xi.identity(),this._upc(),this.calculateBounds(),this.__o=this.bounds.getRectangle(),this.__o.px=this.padding.x,this.__o.py=this.padding.y,this.worldTransform.translate(-this.__o.x+this.__o.px,-this.__o.y+this.__o.py),this._upc(),this.worldTransform=this.cacheMatrix):this._upc()},Fi.prototype._upc=function(){for(var t=0,e=this.childs.length;t<e;){this.childs[t].updatePosture(),t++}},Fi.prototype.addFilter=function(t,e){0<=e?this.filters.splice(e,0,t):ii.isUndefined(e)?this.filters.push(t):console.warn("add filter error")},Fi.prototype.render=function(t){if(t.save(),this.needUpdateBuffer||this.autoUpdateBuffer){var e=0,i=this.childs.length,s=null;for(this.frameBuffer.clear(),this.frameBuffer.setSize(this.__o),e=0;e<i;e++)(s=this.childs[e]).isVisible()&&s.render(this.frameBuffer.ctx);this.filtersRunner(this.frameBuffer.getBuffer()),this.needUpdateBuffer=!1}this.renderMe(t),t.restore()},Fi.prototype.renderMe=function(t){var e=this.__o.x-this.__o.px,i=this.__o.y-this.__o.py,s=this.frameBuffer.width,n=this.frameBuffer.height;this.setTransform(t),this.mask&&this.mask.render(t),t.drawImage(this.frameBuffer.putBuffer(),0,0,s,n,e,i,s,n)},Fi.prototype.filtersRunner=function(e){0!==this.filters.length&&this.filters.forEach(function(t){t.applyFilter(e)})};var Xi=new _i;function Yi(t,e,i){(ii.isNumber(t)||t<0)&&(t=0),(ii.isNumber(e)||e<0)&&(e=0),(ii.isNumber(i)||i<1)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}Object.defineProperty(Yi.prototype,"blur",{get:function(){return this.blurX},set:function(t){this.blurX=this.blurY=t}});var Vi=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],Bi=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];function Ni(){Ei.call(this)}Yi.prototype.applyFilter=function(t){var e=this.blurX>>1;if(isNaN(e)||e<0)return!1;var i=this.blurY>>1;if(isNaN(i)||i<0)return!1;if(0==e&&0==i)return!1;var s=this.quality;(isNaN(s)||s<1)&&(s=1),3<(s|=0)&&(s=3),s<1&&(s=1);for(var n=t.data,r=0,o=0,a=0,h=0,p=0,l=0,u=0,c=0,f=0,d=0,v=0,m=0,y=0,g=0,k=0,_=e+e+1|0,x=i+i+1|0,w=0|t.width,P=0|t.height,M=w-1|0,T=P-1|0,b=1+e|0,S=1+i|0,D={r:0,b:0,g:0,a:0},E=D,a=1;a<_;a++)E=E.n={r:0,b:0,g:0,a:0};E.n=D;var O={r:0,b:0,g:0,a:0},C=O;for(a=1;a<x;a++)C=C.n={r:0,b:0,g:0,a:0};C.n=O;for(var A=null,I=0|Vi[e],L=0|Bi[e],F=0|Vi[i],X=0|Bi[i];0<s--;){u=l=0;for(var Y=I,V=L,o=P;-1<--o;){for(c=b*(m=n[0|l]),f=b*(y=n[l+1|0]),d=b*(g=n[l+2|0]),v=b*(k=n[l+3|0]),E=D,a=b;-1<--a;)E.r=m,E.g=y,E.b=g,E.a=k,E=E.n;for(a=1;a<b;a++)h=l+((M<a?M:a)<<2)|0,c+=E.r=n[h],f+=E.g=n[h+1],d+=E.b=n[h+2],v+=E.a=n[h+3],E=E.n;for(A=D,r=0;r<w;r++)n[l++]=c*Y>>>V,n[l++]=f*Y>>>V,n[l++]=d*Y>>>V,n[l++]=v*Y>>>V,h=u+((h=r+e+1)<M?h:M)<<2,c-=A.r-(A.r=n[h]),f-=A.g-(A.g=n[h+1]),d-=A.b-(A.b=n[h+2]),v-=A.a-(A.a=n[h+3]),A=A.n;u+=w}for(Y=F,V=X,r=0;r<w;r++){for(c=S*(m=n[l=r<<2|0])|0,f=S*(y=n[l+1|0])|0,d=S*(g=n[l+2|0])|0,v=S*(k=n[l+3|0])|0,C=O,a=0;a<S;a++)C.r=m,C.g=y,C.b=g,C.a=k,C=C.n;for(p=w,a=1;a<=i;a++)l=p+r<<2,c+=C.r=n[l],f+=C.g=n[l+1],d+=C.b=n[l+2],v+=C.a=n[l+3],C=C.n,a<T&&(p+=w);if(l=r,A=O,0<s)for(o=0;o<P;o++)n[(h=l<<2)+3]=k=v*Y>>>V,0<k?(n[h]=c*Y>>>V,n[h+1]=f*Y>>>V,n[h+2]=d*Y>>>V):n[h]=n[h+1]=n[h+2]=0,h=r+((h=o+S)<T?h:T)*w<<2,c-=A.r-(A.r=n[h]),f-=A.g-(A.g=n[h+1]),d-=A.b-(A.b=n[h+2]),v-=A.a-(A.a=n[h+3]),A=A.n,l+=w;else for(o=0;o<P;o++)n[(h=l<<2)+3]=k=v*Y>>>V,0<k?(k=255/k,n[h]=(c*Y>>>V)*k,n[h+1]=(f*Y>>>V)*k,n[h+2]=(d*Y>>>V)*k):n[h]=n[h+1]=n[h+2]=0,h=r+((h=o+S)<T?h:T)*w<<2,c-=A.r-(A.r=n[h]),f-=A.g-(A.g=n[h+1]),d-=A.b-(A.b=n[h+2]),v-=A.a-(A.a=n[h+3]),A=A.n,l+=w}}return!0},(Ni.prototype=Object.create(Ei.prototype)).updatePosture=function(t){this.emit("preposture"),this.souldSort&&this._sortList(),this.updateTransform(t);for(var e=0,i=this.childs.length;e<i;)this.childs[e].updatePosture(),e++;this.emit("postposture")};var zi=function(){function t(){x(this,t),this.global=new oi(-1e5,-1e5),this.resolution=new oi(1,1),this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return l(t,[{key:"_copyEvent",value:function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0}},{key:"_reset",value:function(){this.isPrimary=!1}},{key:"pointerId",get:function(){return this.identifier}}]),t}(),qi=function(){function t(){x(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return l(t,[{key:"stopPropagation",value:function(){this.stopped=!0}},{key:"_reset",value:function(){this.stopped=!1,this.currentTarget=null,this.target=null}}]),t}(),Ri=function(){function e(t){x(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return l(e,[{key:"_doSet",value:function(t,e){this._flags=e?this._flags|t:this._flags&~t}},{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),e}();Ri.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var ji="MOUSE",Ui={target:null,data:{global:null}},Hi=function(){u(n,m);var s=v(n);function n(t,e){var i;return x(this,n),e=e||{},(i=s.call(this)).renderer=t,i.autoPreventDefault=e.autoPreventDefault||!1,i.interactionFrequency=e.interactionFrequency||10,i.mouse=new zi,i.mouse.identifier=ji,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[ji]=i.mouse,i.interactionDataPool=[],i.eventData=new qi,i.interactionDOMElement=null,i.moveWhenInside=!0,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onClick=i.onClick.bind(d(i)),i.processClick=i.processClick.bind(d(i)),i.onPointerUp=i.onPointerUp.bind(d(i)),i.processPointerUp=i.processPointerUp.bind(d(i)),i.onPointerCancel=i.onPointerCancel.bind(d(i)),i.processPointerCancel=i.processPointerCancel.bind(d(i)),i.onPointerDown=i.onPointerDown.bind(d(i)),i.processPointerDown=i.processPointerDown.bind(d(i)),i.onPointerMove=i.onPointerMove.bind(d(i)),i.processPointerMove=i.processPointerMove.bind(d(i)),i.onPointerOut=i.onPointerOut.bind(d(i)),i.processPointerOverOut=i.processPointerOverOut.bind(d(i)),i.onPointerOver=i.onPointerOver.bind(d(i)),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._deltaTime=0,i.setTargetElement(i.renderer.canvas),i}return l(n,[{key:"hitTest",value:function(t,e){return Ui.target=null,Ui.data.global=t,e=e||this.renderer,this.processInteractive(Ui,e,null,!0),Ui.target}},{key:"setTargetElement",value:function(t){this.removeEvents(),this.interactionDOMElement=t,this.addEvents()}},{key:"addEvents",value:function(){this.interactionDOMElement&&!this.eventsAdded&&(this.emit("addevents"),this.interactionDOMElement.addEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)}},{key:"removeEvents",value:function(){this.interactionDOMElement&&(this.emit("removeevents"),this.interactionDOMElement.removeEventListener("click",this.onClick,!0),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)}},{key:"update",value:function(t){var e,i,s=t.snippet;if(this._deltaTime+=s,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var n in this.cursor=null,this.activeInteractionData){!this.activeInteractionData.hasOwnProperty(n)||(e=this.activeInteractionData[n]).originalEvent&&"touch"!==e.pointerType&&(i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e),this.processInteractive(i,this.renderer.currentScene,this.processPointerOverOut,!0))}this.setCursorMode(this.cursor)}}},{key:"setCursorMode",value:function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(i(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}}},{key:"triggerEvent",value:function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))}},{key:"mapPositionToPoint",value:function(t,e,i){var s=t.resolution,n=t.global,r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,left:0,top:0,width:0,height:0};s.x=this.interactionDOMElement.width/r.width,s.y=this.interactionDOMElement.height/r.height,n.x=(e-r.left)*s.x,n.y=(i-r.top)*s.y}},{key:"processInteractive",value:function(t,e,i,s,n){if(!e||!e.visible)return!1;var r=t.data.global,o=!1,a=n=e.interactive||n;if(e.interactiveChildren&&e.childs)for(var h=e.childs,p=h.length-1;0<=p;p--){var l=h[p],u=this.processInteractive(t,l,i,s,a);if(u){if(!l.parent)continue;a=!1,u&&(t.target&&(s=!1),o=!0)}}return n&&(s&&!t.target&&e.contains(r)&&(o=!0),e.interactive&&(o&&!t.target&&(t.data.target=t.target=e),i&&i(t,e,!!o))),o}},{key:"onClick",value:function(t){var e,i,s;"click"===t.type&&(e=this.normalizeToPointerData(t),this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault(),i=this.getInteractionDataForPointerId(e[0]),(s=this.configureInteractionEventForDOMEvent(this.eventData,event,i)).data.originalEvent=t,this.processInteractive(s,this.renderer.currentScene,this.processClick,!0),this.emit("click",s))}},{key:"processClick",value:function(t,e,i){i&&this.triggerEvent(e,"click",t)}},{key:"onPointerDown",value:function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,s=0;s<i;s++){var n,r=e[s],o=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,o);a.data.originalEvent=t,this.processInteractive(a,this.renderer.currentScene,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===r.pointerType?this.emit("touchstart",a):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(n=2===r.button,this.emit(n?"rightdown":"mousedown",this.eventData))}}}},{key:"processPointerDown",value:function(t,e,i){var s,n=t.data,r=t.data.identifier;i&&(e.trackedPointers[r]||(e.trackedPointers[r]=new Ri(r)),this.triggerEvent(e,"pointerdown",t),"touch"===n.pointerType?(e.started=!0,this.triggerEvent(e,"touchstart",t)):"mouse"!==n.pointerType&&"pen"!==n.pointerType||((s=2===n.button)?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.triggerEvent(e,s?"rightdown":"mousedown",t)))}},{key:"onPointerComplete",value:function(t,e,i){for(var s=this.normalizeToPointerData(t),n=s.length,r=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a,h=s[o],p=this.getInteractionDataForPointerId(h),l=this.configureInteractionEventForDOMEvent(this.eventData,h,p);l.data.originalEvent=t,this.processInteractive(l,this.renderer.currentScene,i,e||!r),this.emit(e?"pointercancel":"pointerup".concat(r),l),"mouse"===h.pointerType||"pen"===h.pointerType?(a=2===h.button,this.emit(a?"rightup".concat(r):"mouseup".concat(r),l)):"touch"===h.pointerType&&(this.emit(e?"touchcancel":"touchend".concat(r),l),this.releaseInteractionDataForPointerId(h.pointerId,p))}}},{key:"onPointerCancel",value:function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)}},{key:"processPointerCancel",value:function(t,e){var i=t.data,s=t.data.identifier;void 0!==e.trackedPointers[s]&&(delete e.trackedPointers[s],this.triggerEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.triggerEvent(e,"touchcancel",t))}},{key:"onPointerUp",value:function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)}},{key:"processPointerUp",value:function(t,e,i){var s,n,r,o,a=t.data,h=t.data.identifier,p=e.trackedPointers[h],l="touch"===a.pointerType;"mouse"!==a.pointerType&&"pen"!==a.pointerType||(s=2===a.button,n=Ri.FLAGS,r=s?n.RIGHT_DOWN:n.LEFT_DOWN,o=void 0!==p&&p.flags&r,i?(this.triggerEvent(e,s?"rightup":"mouseup",t),o&&this.triggerEvent(e,s?"rightclick":"leftclick",t)):o&&this.triggerEvent(e,s?"rightupoutside":"mouseupoutside",t),p&&(s?p.rightDown=!1:p.leftDown=!1)),l&&e.started&&(e.started=!1,this.triggerEvent(e,"touchend",t)),i?(this.triggerEvent(e,"pointerup",t),p&&(this.triggerEvent(e,"pointertap",t),l&&(this.triggerEvent(e,"tap",t),p.over=!1))):p&&(this.triggerEvent(e,"pointerupoutside",t),l&&this.triggerEvent(e,"touchendoutside",t)),p&&p.none&&delete e.trackedPointers[h]}},{key:"onPointerMove",value:function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var i=Date.now(),s=e.length,n=0;n<s;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),a=this.configureInteractionEventForDOMEvent(this.eventData,r,o);a.timeId=i,a.data.originalEvent=t;var h="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer.currentScene,this.processPointerMove,h),this.emit("pointermove",a),"touch"===r.pointerType&&this.emit("touchmove",a),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}}},{key:"processPointerMove",value:function(t,e,i){var s=t.data,n="touch"===s.pointerType,r="mouse"===s.pointerType||"pen"===s.pointerType;r&&this.processPointerOverOut(t,e,i),n&&e.started&&this.triggerEvent(e,"touchmove",t),this.moveWhenInside&&!i||(this.triggerEvent(e,"pointermove",t),r&&this.triggerEvent(e,"mousemove",t))}},{key:"onPointerOut",value:function(t){var e,i,s;this.supportsTouchEvents&&"touch"===t.pointerType||("mouse"===(e=this.normalizeToPointerData(t)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),i=this.getInteractionDataForPointerId(e),(s=this.configureInteractionEventForDOMEvent(this.eventData,e,i)).data.originalEvent=e,this.processInteractive(s,this.renderer.currentScene,this.processPointerOverOut,!1),this.emit("pointerout",s),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(i.identifier))}},{key:"processPointerOverOut",value:function(t,e,i){var s=t.data,n=t.data.identifier,r="mouse"===s.pointerType||"pen"===s.pointerType,o=e.trackedPointers[n];i&&!o&&(o=e.trackedPointers[n]=new Ri(n)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.triggerEvent(e,"pointerover",t),r&&this.triggerEvent(e,"mouseover",t)),r&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.triggerEvent(e,"pointerout",this.eventData),r&&this.triggerEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[n]))}},{key:"onPointerOver",value:function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),s=this.configureInteractionEventForDOMEvent(this.eventData,e,i);"mouse"===(s.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",s)}},{key:"getInteractionDataForPointerId",value:function(t){var e,i=t.pointerId;return i===ji||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new zi).identifier=i,this.activeInteractionData[i]=e),e._copyEvent(t),e}},{key:"releaseInteractionDataForPointerId",value:function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e._reset(),this.interactionDataPool.push(e))}},{key:"configureInteractionEventForDOMEvent",value:function(t,e,i){return t.data=i,this.mapPositionToPoint(i,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t._reset(),t}},{key:"normalizeToPointerData",value:function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,s=t.changedTouches.length;i<s;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,void(n.tangentialPressure=0)===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=ji),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0),e.push(t);return e}},{key:"destroy",value:function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null}}]),n}();function Gi(t){var e=this;this.canvas=ii.isString(t.dom)?document.getElementById(t.dom)||document.querySelector(t.dom):t.dom,this.realWidth=t.width||this.canvas.width,this.realHeight=t.height||this.canvas.height,this.ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor=t.backgroundColor||"transparent",this.autoClear=!0,this.autoStyle=!1,this.rootMatrix=new _i,this._resolution=0,this.resolution=t.resolution||1,this.width=this.canvas.width=this.realWidth*this.resolution,this.height=this.canvas.height=this.realHeight*this.resolution,this.interactionManager=new Hi(this),this._enableinteractive=null;function i(t){e.interactionManager.update(t)}this.interactiveOnChange=function(){this.enableinteractive?(this.on("prerender",i),this.interactionManager.addEvents()):(this.off("prerender",i),this.interactionManager.removeEvents())},this.enableinteractive=!ii.isBoolean(t.interactive)||t.interactive,this.currentScene=null}function Wi(t){var e=this;this.renderer=new Gi(t),this.scene=new Ni,this.ticker=new di(t.enableFPS),this.ticker.on("tick",function(t){e.update(t)}),this.ticker.start()}Gi.prototype.clear=function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.width,this.height)},Gi.prototype.render=function(t,e){this.currentScene=t,this.emit("preupdate",e),this.currentScene.updateTimeline(e),this.currentScene.updatePosture(this.rootMatrix),this.emit("postupdate",e),this.emit("prerender",e),this.autoClear&&this.clear(),this.currentScene.render(this.ctx),this.emit("postrender",e)},Gi.prototype.resize=function(t,e){ii.isNumber(t)&&ii.isNumber(e)?(this.realWidth=t,this.realHeight=e):(t=this.realWidth,e=this.realHeight),this.width=this.canvas.width=t*this.resolution,this.height=this.canvas.height=e*this.resolution},Gi.prototype.emit=function(){var t;(t=this.interactionManager).emit.apply(t,arguments)},Gi.prototype.on=function(){var t;(t=this.interactionManager).on.apply(t,arguments)},Gi.prototype.once=function(){var t;(t=this.interactionManager).once.apply(t,arguments)},Gi.prototype.off=function(){var t;(t=this.interactionManager).off.apply(t,arguments)},Object.defineProperty(Gi.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution!==t&&(this._resolution=t,this.rootMatrix.identity().scale(t,t),this.resize())}}),Object.defineProperty(Gi.prototype,"enableinteractive",{get:function(){return this._enableinteractive},set:function(t){this._enableinteractive!==t&&(this._enableinteractive=t,this.interactiveOnChange())}}),Wi.prototype.update=function(t){this.renderer.render(this.scene,t)};var Ki=function(){function i(t,e){x(this,i),this.elem=t,this.config=e,this.masks=[]}return l(i,[{key:"updateLottieMasks",value:function(t){this.masks=t}},{key:"render",value:function(t){if(!(this.masks.length<=0)){t.beginPath();for(var e,i=this.masks,s=0;s<i.viewData.length;s++){i.viewData[s].inv&&(e=this.config.session.local,t.moveTo(0,0),t.lineTo(e.w,0),t.lineTo(e.w,e.h),t.lineTo(0,e.h),t.lineTo(0,0));var n=i.viewData[s].v,r=n.v[0];t.moveTo(r[0],r[1]);for(var o=n._length,a=1;a<o;a++){var h=n.o[a-1],p=n.i[a],l=n.v[a];t.bezierCurveTo(h[0],h[1],p[0],p[1],l[0],l[1])}var u=n.o[a-1],c=n.i[0],f=n.v[0];t.bezierCurveTo(u[0],u[1],c[0],c[1],f[0],f[1])}t.clip()}}}]),i}(),Ji=function(){u(n,Ei);var s=v(n);function n(t,e){var i;return x(this,n),(i=s.call(this)).elem=t,i.config=e,i.graphicsMasks=new Ki(t,e),i.addChild=i.adds,i}return l(n,[{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivotX=t.anchorX,this.pivotY=t.anchorY,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.mask||(this.mask=this.graphicsMasks),this.mask.updateLottieMasks(t)}}]),n}();function Zi(t){return"rgba("+t.join(",")+")"}var $i=function(){function t(){x(this,t),this.primitive=null,this.dashResetter=[]}return l(t,[{key:"render",value:function(t){if(this.primitive){var e=this.primitive,i=e.type;if(("st"!==i&&"gs"!==i||0!==e.wi)&&e.data._shouldRender&&0!==e.coOp){t.save();var s=e.elements;"st"===i||"gs"===i?(t.strokeStyle="st"===i?Zi(e.co):e.grd,t.lineWidth=e.wi,t.lineCap=e.lc,t.lineJoin=e.lj,t.miterLimit=e.ml||0):t.fillStyle="fl"===i?Zi(e.co):e.grd,"st"!==i&&"gs"!==i&&t.beginPath();for(var n=s.length,r=0;r<n;r+=1){"st"!==i&&"gs"!==i||(t.beginPath(),e.da&&(t.setLineDash(e.da),t.lineDashOffset=e.do));for(var o=s[r].trNodes,a=o.length,h=0;h<a;h++)"m"==o[h].t?t.moveTo(o[h].p[0],o[h].p[1]):"c"==o[h].t?t.bezierCurveTo(o[h].pts[0],o[h].pts[1],o[h].pts[2],o[h].pts[3],o[h].pts[4],o[h].pts[5]):t.closePath();"st"!==i&&"gs"!==i||(t.stroke(),e.da&&t.setLineDash(this.dashResetter))}"st"!==i&&"gs"!==i&&t.fill(e.r),t.restore()}}}}]),t}(),Qi=function(){u(r,Ii);var n=v(r);function r(t,e){x(this,r);var i,s=new $i;return(i=n.call(this,s)).elem=t,i.config=e,i.passMatrix=new _i,i.drawShape=s,i}return l(r,[{key:"setSelfTransform",value:function(){var t=this.elem.preTransforms.finalTransform.props;0<window.acid&&(window.acid--,console.log(t),console.log([t[0],t[1],t[4],t[5],t[12],t[13]])),this.passMatrix.fromArray([t[0],t[1],t[4],t[5],t[12],t[13]])}},{key:"updateTransform",value:function(t){this.setSelfTransform();var e=t||this.hierarchy&&this.hierarchy.worldTransform||this.parent&&this.parent.worldTransform||xi,i=this.parent&&this.parent.worldAlpha||1,s=this.passMatrix,n=this.worldTransform;n.a=s.a*e.a+s.b*e.c,n.b=s.a*e.b+s.b*e.d,n.c=s.c*e.a+s.d*e.c,n.d=s.c*e.b+s.d*e.d,n.tx=s.tx*e.a+s.ty*e.c+e.tx,n.ty=s.tx*e.b+s.ty*e.d+e.ty,this.worldAlpha=this.alpha*i}},{key:"updateLottieGrahpics",value:function(t){this.drawShape.primitive=t,this.alpha=t.coOp}}]),r}(),ts=function(){function s(t,e,i){x(this,s),this.fillColor=t,this.width=e,this.height=i}return l(s,[{key:"render",value:function(t){t.beginPath(),t.fillStyle=this.fillColor,t.fillRect(0,0,this.width,this.height)}}]),s}(),es=function(){u(o,Ii);var r=v(o);function o(t,e){x(this,o);var i,s=e.color,n=e.rect;return(i=r.call(this,new ts(s,n.width,n.height))).elem=t,i.config=e,i.mask=new Ki(t,e),i.addChild=i.adds,i}return l(o,[{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivotX=t.anchorX,this.pivotY=t.anchorY,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.mask||(this.mask=this.graphicsMasks),this.mask.updateLottieMasks(t)}}]),o}(),is=function(){u(r,Ci);var n=v(r);function r(t,e){x(this,r);var i,s=e.texture;return(i=n.call(this,{texture:s})).elem=t,i.config=e,i.graphicsMasks=new Ki(t,e),i.addChild=i.adds,i}return l(r,[{key:"setHierarchy",value:function(t){this.hierarchy=t}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"updateLottieTransform",value:function(t){this.x=t.x,this.y=t.y,this.pivotX=t.anchorX,this.pivotY=t.anchorY,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.rotation=t.rotation,this.alpha=t.alpha}},{key:"updateLottieMasks",value:function(t){this.mask||(this.mask=this.graphicsMasks),this.mask.updateLottieMasks(t)}}]),r}();M.registerLoader(fi),be.setDisplayByType(be.Type.Null,Ji),be.setDisplayByType(be.Type.Path,Qi),be.setDisplayByType(be.Type.Shape,Ji),be.setDisplayByType(be.Type.Solid,es),be.setDisplayByType(be.Type.Sprite,is),be.setDisplayByType(be.Type.Container,Ji),t.Animation=li,t.AnimationGroup=Qe,t.AnimationManager=ti,t.Application=Wi,t.BezierCurve=Mi,t.BezierEasing=j,t.BlurFilter=Yi,t.Bounds=mi,t.CatmullRom=Pi,t.Circle=gi,t.Container=Ei,t.DisplayObject=Di,t.DisplayRegister=be,t.Ellipse=ki,t.Eventer=m,t.FilterGroup=Fi,t.FrameBuffer=Ai,t.Graphics=Ii,t.IDENTITY=xi,t.Loader=ci,t.LoaderRegister=M,t.Matrix=_i,t.NURBSCurve=Si,t.Point=oi,t.Polygon=yi,t.PropertyFactory=It,t.Rectangle=vi,t.Renderer=Gi,t.Scene=Ni,t.Sprite=Ci,t.SvgCurve=Ti,t.TEMP_MATRIX=wi,t.TextFace=Li,t.Texture=ui,t.Ticker=di,t.Tools=w,t.TransformFrames=Ue,t.TransformProperty=De,t.Tween=ei,t.Utils=ii,t.loaderUtil=function(t,e){return new ci(1<arguments.length&&void 0!==e?e:"*").load(t)},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jcc2d.js.map
